import{r as e,W as n,A as a,X as t,Y as i,G as o,Z as r,$ as l,a0 as u,C as c,a1 as s,o as v,Q as f}from"./index-DQFDpBTO.js";function p(e){return!!t()&&(i(e),!0)}function g(e){return"function"==typeof e?e():o(e)}const m="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const d=Object.prototype.toString,h=e=>"[object Object]"===d.call(e),y=()=>{};function b(...n){if(1!==n.length)return r(...n);const a=n[0];return"function"==typeof a?l(u((()=>({get:a,set:y})))):e(a)}function S(e){var n;const a=g(e);return null!=(n=null==a?void 0:a.$el)?n:a}const w=m?window:void 0,k=m?window.navigator:void 0;function A(n){const a=function(){const n=e(!1),a=f();return a&&v((()=>{n.value=!0}),a),n}();return c((()=>(a.value,Boolean(n()))))}function T(n={}){const{navigator:t=k}=n,i=["chargingchange","chargingtimechange","dischargingtimechange","levelchange"],o=A((()=>t&&"getBattery"in t&&"function"==typeof t.getBattery)),r=e(!1),l=e(0),u=e(0),c=e(1);let s;function v(){r.value=this.charging,l.value=this.chargingTime||0,u.value=this.dischargingTime||0,c.value=this.level}return o.value&&t.getBattery().then((e=>{s=e,v.call(s),function(...e){let n,t,i,o;if("string"==typeof e[0]||Array.isArray(e[0])?([t,i,o]=e,n=w):[n,t,i,o]=e,!n)return y;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const r=[],l=()=>{r.forEach((e=>e())),r.length=0},u=a((()=>[S(n),g(o)]),(([e,n])=>{if(l(),!e)return;const a=h(n)?{...n}:n;r.push(...t.flatMap((n=>i.map((t=>((e,n,a,t)=>(e.addEventListener(n,a,t),()=>e.removeEventListener(n,a,t)))(e,n,t,a))))))}),{immediate:!0,flush:"post"}),c=()=>{u(),l()};p(c)}(s,i,v,{passive:!0})})),{isSupported:o,charging:r,chargingTime:l,dischargingTime:u,level:c}}function j(t={}){const i=e(),o=A((()=>"undefined"!=typeof performance&&"memory"in performance));if(o.value){const{interval:o=1e3}=t;!function(t,i=1e3,o={}){const{immediate:r=!0,immediateCallback:l=!1}=o;let u=null;const c=e(!1);function s(){u&&(clearInterval(u),u=null)}function v(){c.value=!1,s()}function f(){const e=g(i);e<=0||(c.value=!0,l&&t(),s(),u=setInterval(t,e))}r&&m&&f(),(n(i)||"function"==typeof i)&&p(a(i,(()=>{c.value&&m&&f()})));p(v)}((()=>{i.value=performance.memory}),o,{immediate:t.immediate,immediateCallback:t.immediateCallback})}return{isSupported:o,memory:i}}function B(n,t={}){const{pitch:i=1,rate:o=1,volume:r=1,window:l=w}=t,u=l&&l.speechSynthesis,v=A((()=>u)),f=e(!1),m=e("init"),d=b(n||""),h=b(t.lang||"en-US"),y=s(void 0),S=e=>{e.lang=g(h),e.voice=g(t.voice)||null,e.pitch=g(i),e.rate=g(o),e.volume=r,e.onstart=()=>{f.value=!0,m.value="play"},e.onpause=()=>{f.value=!1,m.value="pause"},e.onresume=()=>{f.value=!0,m.value="play"},e.onend=()=>{f.value=!1,m.value="end"},e.onerror=e=>{y.value=e}},k=c((()=>{f.value=!1,m.value="init";const e=new SpeechSynthesisUtterance(d.value);return S(e),e}));return v.value&&(S(k.value),a(h,(e=>{k.value&&!f.value&&(k.value.lang=e)})),t.voice&&a(t.voice,(()=>{u.cancel()})),a(f,(()=>{f.value?u.resume():u.pause()}))),p((()=>{f.value=!1})),{isSupported:v,isPlaying:f,status:m,utterance:k,error:y,stop:()=>{u.cancel(),f.value=!1},toggle:(e=!f.value)=>{f.value=e},speak:()=>{u.cancel(),k&&u.speak(k.value)}}}export{j as a,T as b,B as u};
