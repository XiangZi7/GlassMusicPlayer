import{d as t,a as e,t as s,u as a,r as l,J as n,o as r,K as i,L as o,M as c,N as u,_ as d,b as p,e as m,f as b,i as f,w as h,h as y,j as g,F as x,k as v,l as w,m as k,z as L}from"./index-BPJc0cBV.js";const P={class:"p-6 h-full w-full"},_={key:0,class:"mb-2"},C={class:"flex space-x-2"},j=["onClick"],M=["src","alt"],K={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},S={class:"text-white text-sm font-semibold truncate"},U={class:"text-white text-xs truncate"},z={key:1},E={class:"pb-2"},I={class:"flex space-x-2"},N={class:"grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-8"},$=["onClick"],F=["src","alt"],J={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},O={class:"text-white text-sm font-semibold truncate"},q={class:"text-white text-xs truncate"};const A=d(t({__name:"index",setup(t,{expose:d}){d();const p=e({Playlist:[],bannersList:[],subList:[],currentCat:"欧美",newestLsit:[]}),{Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y}=s(p),g=a(),x=l([]);function v(t){o({offset:t+1}).then((({playlists:t})=>{p.Playlist=p.Playlist.concat(t)}))}n(x,{initialPageNum:1,pageSize:10,threshold:.1},v),r((()=>{Promise.all([i(),o({offset:1,limit:20}),c(),u()]).then((([t,e,s,a])=>{p.bannersList=t.banners,p.Playlist=e.playlists,p.subList=s.sub,p.newestLsit=a.albums})).catch((t=>{}))}));const w={state:p,Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y,router:g,observedElement:x,handleIntersect:v,handleCat:function(t){h.value=t,o({cat:t}).then((({playlists:t})=>{p.Playlist=t}))}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(t,e,s,a,l,n){const r=p("el-image"),i=p("el-carousel-item"),o=p("el-carousel"),c=p("el-scrollbar"),u=p("el-button");return m(),b("div",P,[f(o,{interval:4e3,type:"card",height:"auto",autoplay:""},{default:h((()=>[(m(!0),b(x,null,v(a.bannersList,(t=>(m(),w(i,{key:t,class:"!h-28 md:!h-60 lg:!h-64"},{default:h((()=>[f(r,{class:"!rounded-lg",src:t.imageUrl},null,8,["src"])])),_:2},1024)))),128))])),_:1}),a.newestLsit.length>0?(m(),b("div",_,[e[0]||(e[0]=y("h1",{class:"text-2xl font-bold"},"最新专辑",-1)),f(c,{class:"py-4"},{default:h((()=>[y("div",C,[(m(!0),b(x,null,v(a.newestLsit,(t=>(m(),b("div",{class:"relative flex-[180px] shrink-0 rounded-lg cursor-pointer",key:t.id,onClick:e=>a.router.push(`/album?id=${t.id}`)},[y("img",{src:t.picUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,M),y("div",K,[y("h3",S,k(t.name),1),y("p",U,k(t.artist.name),1)])],8,j)))),128))])])),_:1})])):g("",!0),a.Playlist.length>0?(m(),b("div",z,[e[1]||(e[1]=y("h1",{class:"text-2xl font-bold mb-4"},"热门歌单",-1)),y("div",E,[f(c,{class:"pb-4"},{default:h((()=>[y("div",I,[(m(!0),b(x,null,v(a.subList,(t=>(m(),w(u,{class:"!rounded-xl transition duration-200",style:{},type:a.currentCat==t.name?"primary":"",key:t.name,onClick:e=>a.handleCat(t.name)},{default:h((()=>[L(k(t.name),1)])),_:2},1032,["type","onClick"])))),128))])])),_:1})]),y("div",N,[(m(!0),b(x,null,v(a.Playlist,(t=>(m(),b("div",{class:"group relative rounded-lg overflow-hidden cursor-pointer",key:t.id,onClick:e=>a.router.push(`/playlist?id=${t.id}`),ref_for:!0,ref:"observedElement"},[y("img",{src:t.coverImgUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,F),y("div",J,[y("h3",O,k(t.name),1),y("p",q,k(t.description),1)])],8,$)))),128))])])):g("",!0)])}],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/index.vue"]]);export{A as default};
