import{e as t,f as a,h as e,d as l,H as s,M as r,a as i,t as n,o,N as c,O as d,_ as m,b as u,i as p,z as x,m as y,F as f,k as g,w as v,P as h,Q as w}from"./index-DANx4g5m.js";import{_ as D}from"./index-DoCaBgJy.js";const k={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const b={name:"mdi-cards-heart-outline",render:function(l,s){return t(),a("svg",k,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"},null,-1)]))}},C={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const T={name:"material-symbols-play-circle-outline",render:function(l,s){return t(),a("svg",C,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"m9.5 16.5l7-4.5l-7-4.5zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}},_={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const L={name:"ic-outline-play-circle",render:function(l,s){return t(),a("svg",_,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m-2.5-3.5l7-4.5l-7-4.5z"},null,-1)]))}},M={class:"container p-6 overflow-hidden h-full flex-1"},q={class:"flex gap-6 h-full"},N={class:"flex-[20%] max-w-[20%] space-y-4 relative"},P=["src"],S={class:"absolute top-0 right-2 bg-gray-400/50 dark:bg-gray-600/50 px-2 py-1 rounded-md text-white text-sm flex items-center gap-1"},V={class:"flex items-center space-x-4"},j={class:"relative flex shrink-0 overflow-hidden rounded-full w-12 h-12"},U=["src"],z={class:"text-lg font-semibold"},B={class:"text-2xl font-bold tracking-tight dark:text-white"},F={class:"flex gap-2 text-muted-foreground dark:text-gray-300 text-sm md:text-base"},I={class:"bg-[var(--el-color-primary)] text-white dark:bg-gray-700 px-2 py-1 rounded-md text-sm"},K=["title"],O={class:"flex gap-1 w-full"},A={class:"flex items-center"},H={class:"text-sm dark:text-gray-300"},Q={class:"flex items-center"},W={class:"text-sm dark:text-gray-300"},E={class:"flex items-center"},G={class:"text-sm dark:text-gray-300"},J={class:"text-muted-foreground dark:text-gray-300 text-sm"},R={class:"text-muted-foreground dark:text-gray-300 text-sm"},X={class:"flex flex-col flex-1 overflow-x-hidden"},Y={class:"gap-6 flex flex-1"},Z={class:"relative w-full h-full"};const $=m(l({__name:"index",setup(t,{expose:a}){a();const e=s(),l=r(),m=i({playlistData:{playlist:{tracks:[]}},commentListData:[],drawer:!1}),{playlistData:u,commentListData:p,drawer:x}=n(m);o((()=>{c(e.query.id).then((t=>{m.playlistData=t}))}));const y={route:e,audioStore:l,state:m,playlistData:u,commentListData:p,drawer:x,formatNumber:function(t){if(t<1e4)return t.toString();if(t<1e5){const a=(t/1e4).toFixed(1);return a.endsWith(".0")?a.slice(0,-2)+"万":a+"万"}return(t/1e4).toFixed(0)+"万"},formattedDate:function(t){return new Date(t).toLocaleString()},getCommentPlaylist:(t=1)=>{d({offset:t,id:e.query.id}).then((t=>{m.commentListData=m.commentListData.concat(t.comments)}))},showDrawer:()=>{m.drawer=!0,m.commentListData.length>0||d({offset:1,id:e.query.id}).then((t=>{m.commentListData=t.comments}))},playMusic:()=>{let t=u.value.playlist.tracks.map((t=>({id:t.id,title:t.name,singer:t.ar.map((t=>t.name)).join(" / "),album:t.al.name,cover:t.al.picUrl,time:t.dt,source:"",mv:t.mv})));l.addTrack(t)}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(l,s,r,i,n,o){var c,d;const m=L,k=T,C=u("el-button"),_=b,$=w,tt=D,at=h;return t(),a("div",M,[e("div",q,[e("div",N,[e("img",{alt:"Album cover",class:"w-full aspect-square object-cover rounded-lg shadow-xl",src:i.playlistData.playlist.coverImgUrl+"?param=560y560"},null,8,P),e("div",S,[p(m),x(" "+y(i.formatNumber(i.playlistData.playlist.playCount)),1)]),e("div",V,[e("span",j,[e("img",{class:"aspect-square h-full w-full",alt:"Creator avatar",src:null==(c=i.playlistData.playlist.creator)?void 0:c.avatarUrl},null,8,U)]),e("div",null,[s[2]||(s[2]=e("p",{class:"text-sm font-medium"},"Created by",-1)),e("p",z,y(null==(d=i.playlistData.playlist.creator)?void 0:d.nickname),1)])]),e("h1",B,y(i.playlistData.playlist.name),1),e("div",F,[(t(!0),a(f,null,g(i.playlistData.playlist.tags,(e=>(t(),a("span",I,y(e),1)))),256))]),e("p",{class:"text-muted-foreground dark:text-gray-300 text-sm md:line-clamp-5",title:i.playlistData.playlist.description},y(i.playlistData.playlist.description),9,K),e("div",O,[e("div",A,[p(C,{text:"",circle:"",class:"!p-3",onClick:i.playMusic},{default:v((()=>[p(k,{class:"text-xl dark:text-white"})])),_:1}),e("span",H,y(i.formatNumber(i.playlistData.playlist.playCount)),1)]),e("div",Q,[p(C,{text:"",circle:"",class:"!p-3"},{default:v((()=>[p(_,{class:"text-xl dark:text-white"})])),_:1}),e("span",W,y(i.formatNumber(i.playlistData.playlist.subscribedCount)),1)]),e("div",E,[p(C,{text:"",circle:"",class:"!p-3",onClick:i.showDrawer},{default:v((()=>[p($,{class:"text-xl dark:text-white"})])),_:1}),e("span",G,y(i.formatNumber(i.playlistData.playlist.commentCount)),1)])]),e("p",J," 创建于"+y(i.formattedDate(i.playlistData.playlist.createTime)),1),e("span",R," 共"+y(i.playlistData.playlist.trackCount)+"首歌曲 ",1)]),e("div",X,[e("div",Y,[e("div",Z,[p(tt,{modelValue:i.playlistData.playlist.tracks,"onUpdate:modelValue":s[0]||(s[0]=t=>i.playlistData.playlist.tracks=t)},null,8,["modelValue"])])])])]),p(at,{modelValue:i.drawer,"onUpdate:modelValue":s[1]||(s[1]=t=>i.drawer=t),data:i.commentListData,onDIntersect:i.getCommentPlaylist},null,8,["modelValue","data"])])}],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/playlist/index.vue"]]);export{$ as default};
