import{o as l,c as i,a as e,d as g,A as y,r as M,t as I,L as S,B as w,g as a,l as n,F as B,k as C,bL as u,bM as N,bN as E,f as h,h as L,bo as V,_ as A}from"./index-xuQRkY2E.js";import{u as P}from"./useIntersectionObserver-Z01xydaK.js";const $={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},j=e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M22 12c0 5.523-4.477 10-10 10c-1.6 0-3.112-.376-4.452-1.044a1.634 1.634 0 0 0-1.149-.133l-2.226.596a1.3 1.3 0 0 1-1.591-1.592l.595-2.226a1.633 1.633 0 0 0-.134-1.148A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2s10 4.477 10 10m-14.5-.892c0 1.369 1.319 2.805 2.529 3.834c.823.7 1.235 1.051 1.971 1.051s1.148-.35 1.971-1.051c1.21-1.03 2.529-2.465 2.529-3.834c0-2.677-2.475-3.676-4.5-1.608c-2.025-2.068-4.5-1.069-4.5 1.608","clip-rule":"evenodd"},null,-1),D=[j];function F(v,r){return l(),i("svg",$,[...D])}const K={name:"solar-chat-round-like-bold",render:F},R={class:"mv-container"},U=["src"],z={class:"mv-info"},O={class:"mv-comments"},T={class:"comments-list mt-2"},q={class:"user-avatar"},G={class:"comment-content ml-2"},H={class:"user-info"},J={class:"user-name"},Q={class:"comment-date"},W={class:"user-comment"},X={class:"text-xs flex justify-between"},Y={class:"flex items-center gap-1 mt-2"},Z=g({__name:"[id]",setup(v){const r=y(),o=M({mvSrc:"",mvInfo:{},comments:[]}),{comments:p,mvSrc:f,mvInfo:m}=I(o),_=S([]);P(_,{initialPageNum:1,pageSize:10,threshold:.1},x);function x(c){u({offset:c,id:r.params.id}).then(({comments:t})=>{o.comments=o.comments.concat(t)})}return w(()=>r.params.id,()=>{const c=r.params.id;N(c).then(({data:t})=>{o.mvSrc=t.url}),E(c).then(({data:t})=>{o.mvInfo=t}),u({id:c}).then(({comments:t})=>{o.comments=t})},{immediate:!0}),(c,t)=>{var d;const k=V,b=K;return l(),i("div",R,[e("video",{class:"mv-player rounded",src:a(f),controls:""},null,8,U),e("div",z,[e("h1",null,n(a(m).name),1),e("h2",null,n((d=a(m).artists)==null?void 0:d.map(s=>s.name).join(" / ")),1)]),e("div",O,[e("h3",null,"用户评论("+n(a(m).commentCount)+")",1),e("ul",T,[(l(!0),i(B,null,C(a(p),s=>(l(),i("li",{key:s.id,ref_for:!0,ref_key:"observedElement",ref:_,class:"comment"},[e("div",q,[h(k,{src:s.user.avatarUrl,alt:s.user.nickname},null,8,["src","alt"])]),e("div",G,[e("div",H,[e("span",J,n(s.user.nickname),1),e("span",Q,n(s.timeStr),1)]),e("p",W,n(s.content),1),e("div",X,[e("span",Y,[h(b,{class:"text-red-500 text-[14px]"}),L(" "+n(s.likedCount),1)]),e("span",null,n(s.ipLocation.location),1)])])]))),128))])])])}}}),te=A(Z,[["__scopeId","data-v-99f4d33a"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/pages/video/[id].vue"]]);export{te as default};
