var D=(m,o,t)=>new Promise((v,i)=>{var l=r=>{try{s(t.next(r))}catch(h){i(h)}},e=r=>{try{s(t.throw(r))}catch(h){i(h)}},s=r=>r.done?v(r.value):Promise.resolve(r.value).then(l,e);s((t=t.apply(m,o)).next())});import{d as U,l as w,b as W}from"./element-plus-aaf5bffe.js";import{_ as E}from"./musicTable-dc861393.js";import{d as L}from"./index-9ee2bb05.js";import{u as P,b as R}from"./vue-router-6e50d621.js";import{Z as $,a7 as C,o as d,c as p,a,P as j,a8 as B,u as c,W as b,e as M,h as O,a6 as S,U as u,S as y,z as V}from"./@vue-b6763d16.js";import"./@element-plus-3d5ed1a4.js";import"./@vueuse-ae6f4f55.js";import"./lodash-es-9cc69f4e.js";import"./@ctrl-86a38320.js";import"./@popperjs-7c8154ca.js";import"./escape-html-19374969.js";import"./dayjs-39b5b250.js";import"./normalize-wheel-es-ed76fb12.js";import"./formatTime-3cb25965.js";import"./pinia-358b124a.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./axios-e76ab20a.js";const z={class:"content-section menuBar-mv"},F={class:"apps-card"},I=["onClick"],Z={class:"app-card"},A=["src"],G={href:"javascript:;"},H={__name:"songList",props:{data:{type:Object,default:()=>[]}},setup(m){const o=m,t=P(),v=$({list:[],currentPage:1});return C(v),(i,l)=>(d(),p("div",null,[a("div",z,[a("div",F,[(d(!0),p(j,null,B(o.data,(e,s)=>(d(),p("div",{class:"apps-item",key:s,onClick:r=>c(t).push({path:"/playList",query:{id:e.id}})},[a("div",Z,[a("img",{src:e.coverImgUrl+"?param=200y200",alt:""},null,8,A)]),a("a",G,b(e.name),1)],8,I))),128))])])]))}},J={class:"content-section menuBar-mv"},K={class:"apps-card"},Q=["onClick"],X={class:"app-card m-mv"},Y=["src"],tt={href:"javascript:;"},at={__name:"mv",props:{data:{type:Object,default:()=>[]}},setup(m){const o=m,t=P(),v=$({list:[]});C(v);const i=l=>{t.push({name:"mv",params:{id:l}})};return(l,e)=>(d(),p("div",null,[a("div",J,[a("div",K,[(d(!0),p(j,null,B(o.data,(s,r)=>(d(),p("div",{class:"apps-item mv-text",onClick:h=>i(s.id),key:r},[a("div",X,[a("img",{src:s.cover+"?param=370y220",alt:""},null,8,Y)]),a("a",tt,b(s.name),1)],8,Q))),128))])])]))}},et={class:"content-section menuBar-mv"},st={class:"apps-card"},nt=["onClick"],ot={class:"app-card"},rt=["src"],lt={href:"javascript:;"},ct={__name:"artists",props:{data:{type:Object,default:()=>[]}},setup(m){const o=m,t=P(),v=$({list:[]});return C(v),(i,l)=>(d(),p("div",null,[a("div",et,[a("div",st,[(d(!0),p(j,null,B(o.data,(e,s)=>(d(),p("div",{class:"apps-item",key:s,onClick:r=>c(t).push({path:"/playList",query:{id:e.id}})},[a("div",ot,[a("img",{src:e.picUrl+"?param=200y200",alt:""},null,8,rt)]),a("a",lt,b(e.name),1)],8,nt))),128))])])]))}},it={class:"content-section menuBar-mv"},ut={class:"content-section-title"},dt={class:"content-section menuBar-mv"},pt={class:"flex",style:{"justify-content":"center","margin-top":"20px"}},Nt={__name:"index",setup(m){const o=R(),t=$({list:[],activeName:"1",tableData:[],currentPage:1,songTotal:0,loading:!0}),{list:v,activeName:i,tableData:l,currentPage:e,songTotal:s,loading:r}=C(t),h=f=>{t.tableData=[],k(f.props.name)};M(()=>{k("1")}),O(()=>o.query.keyWorks,()=>{o.query.keyWorks&&k("1")});const k=f=>D(this,null,function*(){t.loading=!0;const{data:n}=yield L({keywords:o.query.keyWorks,offset:(t.currentPage-1)*30,limit:30,type:f});switch(t.activeName){case"1":t.tableData=n.result.songs.map(_=>{const g=_.ar.map(x=>x.name).join(",");return{cover:_.al.picUrl,title:_.name,singer:g,album:_.al.name,time:_.dt,id:_.id,mv:_.mv}}),t.songTotal=n.result.songCount;break;case"1000":t.tableData=n.result.playlists,t.songTotal=n.result.playlistCount;break;case"1004":t.tableData=n.result.mvs,t.songTotal=n.result.mvCount;break;case"100":t.tableData=n.result.artists,t.songTotal=n.result.artistCount;break}t.loading=!1}),N=f=>{k(t.activeName)};return(f,n)=>{const _=E,g=W,x=U,q=w;return d(),p("div",null,[a("div",it,[a("div",ut,[a("h1",null,b(c(o).query.keyWorks),1),S(),a("span",null,b(c(s))+"个结果",1)]),a("div",dt,[u(x,{modelValue:c(i),"onUpdate:modelValue":n[0]||(n[0]=T=>V(i)?i.value=T:null),class:"demo-tabs",onTabClick:h},{default:y(()=>[u(g,{label:"热门歌曲",name:"1"},{default:y(()=>[u(_,{data:c(l)},null,8,["data"])]),_:1}),u(g,{label:"歌单",name:"1000"},{default:y(()=>[u(H,{data:c(l)},null,8,["data"])]),_:1}),u(g,{label:"MV",name:"1004"},{default:y(()=>[u(at,{data:c(l)},null,8,["data"])]),_:1}),u(g,{label:"专辑",name:"100"},{default:y(()=>[u(ct,{data:c(l)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"]),a("div",pt,[u(q,{onCurrentChange:N,currentPage:c(e),"onUpdate:currentPage":n[1]||(n[1]=T=>V(e)?e.value=T:null),"page-size":30,layout:"prev, pager, next, jumper",total:c(s)},null,8,["currentPage","total"])])])])])}}};export{Nt as default};
