import{_ as M}from"./index-e27be7a5.js";import{f as S,Z as B,a7 as q,x as p,e as X,o as j,c as V,a as o,W as i,u as r,X as f}from"./@vue-b6763d16.js";import"./element-plus-aaf5bffe.js";import"./@element-plus-3d5ed1a4.js";import"./@vueuse-ae6f4f55.js";import"./lodash-es-9cc69f4e.js";import"./@ctrl-86a38320.js";import"./@popperjs-7c8154ca.js";import"./escape-html-19374969.js";import"./dayjs-39b5b250.js";import"./normalize-wheel-es-ed76fb12.js";import"./pinia-358b124a.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./axios-e76ab20a.js";import"./vue-router-6e50d621.js";const J={class:"music-player"},w={class:"controls"},z={class:"time"},D=["src"],Z={__name:"index",setup(F){const n=S(),e=B({list:[],playing:!1,currentIndex:0,mode:0,progress:0,duration:0,currentTime:0,songs:[{name:"歌曲1",src:"https://cn-scya-ct-01-03.bilivideo.com/mefmxcodeboss/aod/202112/13/76e0f45f3b756cb5fd82f4024a7e4b7e.m4a?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&uipk=5&nbs=1&deadline=1685005922&gen=playurlv2&os=bcache&oi=2104912314&trid=0000e70271b5204f4af5bc9ee48f1da1d033B&mid=0&platform=html5&upsig=13e2f675be1a5aeb3dfdd01c79f6dae1&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform&cdnid=62703&bvc=vod&nettype=0&orderid=0,1&logo=00000000"},{name:"歌曲2",src:"https://cn-jxjj-ct-01-01.bilivideo.com/mefmxcodeboss/aod/202106/14/f14b848a15d6357bf2b5dc9c14fcb633.m4a?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&uipk=5&nbs=1&deadline=1685005996&gen=playurlv2&os=bcache&oi=2104912314&trid=0000067ed8353dcc4d5096a47f4dbf757368B&mid=0&platform=html5&upsig=ab517e53df7a09c7cb1fc36ab45886ae&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform&cdnid=4261&bvc=vod&nettype=0&orderid=0,1&logo=00000000"}]}),{list:L,currentTime:g,duration:b,progress:l}=q(e),d=p(()=>e.songs[e.currentIndex]),v=p(()=>["顺序播放","单曲循环","随机播放"][e.mode]);X(()=>{n.value.src=d.value.src});const _=()=>{e.playing=!0,n.value.play()},h=()=>{e.playing=!1,n.value.pause()},x=()=>{e.playing?h():_()},y=()=>{e.currentIndex===0?e.currentIndex=e.songs.length-1:e.currentIndex--,c()},u=()=>{e.currentIndex===e.songs.length-1?e.currentIndex=0:e.currentIndex++,c()},c=()=>{n.value.src=d.value.src,n.value.play(),e.playing=!0},k=()=>{switch(e.mode){case 0:u();break;case 1:c();break;case 2:const t=Math.floor(Math.random()*e.songs.length);e.currentIndex=t,c();break}},T=()=>{e.currentTime=Math.floor(n.value.currentTime),e.progress=e.currentTime/e.duration*100},I=()=>{e.duration=Math.floor(n.value.duration)},N=()=>{e.mode===2?e.mode=0:e.mode++},m=t=>{const s=Math.floor(t/60),a=t%60;return`${s}:${a.toString().padStart(2,"0")}`},C=t=>{const s=t.currentTarget.getBoundingClientRect(),a=s.width,E=(t.clientX-s.left)/a;n.value.currentTime=e.duration*E};return(t,s)=>(j(),V("div",J,[o("div",w,[o("button",{onClick:y},"上一首"),o("button",{onClick:x},i(t.playing?"暂停":"播放"),1),o("button",{onClick:u},"下一首"),o("button",{onClick:N},i(r(v)),1)]),o("div",{class:"progress",onClick:s[0]||(s[0]=a=>C(a))},[o("div",{class:"bar",style:f({width:r(l)+"%"})},null,4),o("div",{class:"thumb",style:f({left:r(l)+"%"})},null,4),o("div",z,i(m(r(g)))+" / "+i(m(r(b))),1)]),o("audio",{ref_key:"audio",ref:n,src:r(d).src,onTimeupdate:T,onDurationchange:I,onEnded:k},null,40,D)]))}},se=M(Z,[["__scopeId","data-v-76097b36"]]);export{se as default};
