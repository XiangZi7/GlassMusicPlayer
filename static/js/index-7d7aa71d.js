import{d as a,l as t,b as e}from"./element-plus-2073bb18.js";import{_ as s}from"./musicTable-dff33bd3.js";import{d as l}from"./index-63790c63.js";import{u as r,b as n}from"./vue-router-f9877ca9.js";import{Z as i,a7 as o,o as u,c,a as p,P as m,a8 as d,u as v,W as y,e as g,h as j,a6 as b,U as f,S as k,z as h}from"./@vue-06d7d904.js";import"./@element-plus-788c49e3.js";import"./@vueuse-45103712.js";import"./lodash-es-57caac06.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-2f7c2e90.js";import"./dayjs-4d0ffb58.js";import"./normalize-wheel-es-3222b0a2.js";import"./formatTime-d6dfa579.js";import"./pinia-da509d88.js";import"./pinia-plugin-persist-70d140bd.js";import"./axios-a8ee11a1.js";const _={class:"content-section menuBar-mv"},C={class:"apps-card"},x=["onClick"],P={class:"app-card"},T=["src"],D={href:"javascript:;"},q={__name:"songList",props:{data:{type:Object,default:()=>[]}},setup(a){const t=a,e=r(),s=i({list:[],currentPage:1});return o(s),(a,s)=>(u(),c("div",null,[p("div",_,[p("div",C,[(u(!0),c(m,null,d(t.data,((a,t)=>(u(),c("div",{class:"apps-item",key:t,onClick:t=>v(e).push({path:"/playList",query:{id:a.id}})},[p("div",P,[p("img",{src:a.coverImgUrl+"?param=200y200",alt:""},null,8,T)]),p("a",D,y(a.name),1)],8,x)))),128))])])]))}},B={class:"content-section menuBar-mv"},U={class:"apps-card"},w=["onClick"],W={class:"app-card m-mv"},N=["src"],V={href:"javascript:;"},z={__name:"mv",props:{data:{type:Object,default:()=>[]}},setup(a){const t=a,e=r(),s=i({list:[]});o(s);return(a,s)=>(u(),c("div",null,[p("div",B,[p("div",U,[(u(!0),c(m,null,d(t.data,((a,t)=>(u(),c("div",{class:"apps-item mv-text",onClick:t=>{return s=a.id,void e.push({name:"mv",params:{id:s}});var s},key:t},[p("div",W,[p("img",{src:a.cover+"?param=370y220",alt:""},null,8,N)]),p("a",V,y(a.name),1)],8,w)))),128))])])]))}},L={class:"content-section menuBar-mv"},O={class:"apps-card"},A=["onClick"],I={class:"app-card"},M=["src"],S={href:"javascript:;"},Z={__name:"artists",props:{data:{type:Object,default:()=>[]}},setup(a){const t=a,e=r(),s=i({list:[]});return o(s),(a,s)=>(u(),c("div",null,[p("div",L,[p("div",O,[(u(!0),c(m,null,d(t.data,((a,t)=>(u(),c("div",{class:"apps-item",key:t,onClick:t=>v(e).push({path:"/playList",query:{id:a.id}})},[p("div",I,[p("img",{src:a.picUrl+"?param=200y200",alt:""},null,8,M)]),p("a",S,y(a.name),1)],8,A)))),128))])])]))}},E={class:"content-section menuBar-mv"},F={class:"content-section-title"},G={class:"content-section menuBar-mv"},H={class:"flex",style:{"justify-content":"center","margin-top":"20px"}},J={__name:"index",setup(r){const m=n(),d=i({list:[],activeName:"1",tableData:[],currentPage:1,songTotal:0,loading:!0}),{list:_,activeName:C,tableData:x,currentPage:P,songTotal:T,loading:D}=o(d),B=a=>{d.tableData=[],U(a.props.name)};g((()=>{U("1")})),j((()=>m.query.keyWorks),(()=>{m.query.keyWorks&&U("1")}));const U=a=>{return t=this,e=null,s=function*(){d.loading=!0;const{data:t}=yield l({keywords:m.query.keyWorks,offset:30*(d.currentPage-1),limit:30,type:a});switch(d.activeName){case"1":d.tableData=t.result.songs.map((a=>{const t=a.ar.map((a=>a.name)).join(",");return{cover:a.al.picUrl,title:a.name,singer:t,album:a.al.name,time:a.dt,id:a.id,mv:a.mv}})),d.songTotal=t.result.songCount;break;case"1000":d.tableData=t.result.playlists,d.songTotal=t.result.playlistCount;break;case"1004":d.tableData=t.result.mvs,d.songTotal=t.result.mvCount;break;case"100":d.tableData=t.result.artists,d.songTotal=t.result.artistCount}d.loading=!1},new Promise(((a,l)=>{var r=a=>{try{i(s.next(a))}catch(t){l(t)}},n=a=>{try{i(s.throw(a))}catch(t){l(t)}},i=t=>t.done?a(t.value):Promise.resolve(t.value).then(r,n);i((s=s.apply(t,e)).next())}));var t,e,s},w=a=>{U(d.activeName)};return(l,r)=>{const n=s,i=e,o=a,d=t;return u(),c("div",null,[p("div",E,[p("div",F,[p("h1",null,y(v(m).query.keyWorks),1),b(),p("span",null,y(v(T))+"个结果",1)]),p("div",G,[f(o,{modelValue:v(C),"onUpdate:modelValue":r[0]||(r[0]=a=>h(C)?C.value=a:null),class:"demo-tabs",onTabClick:B},{default:k((()=>[f(i,{label:"热门歌曲",name:"1"},{default:k((()=>[f(n,{data:v(x)},null,8,["data"])])),_:1}),f(i,{label:"歌单",name:"1000"},{default:k((()=>[f(q,{data:v(x)},null,8,["data"])])),_:1}),f(i,{label:"MV",name:"1004"},{default:k((()=>[f(z,{data:v(x)},null,8,["data"])])),_:1}),f(i,{label:"专辑",name:"100"},{default:k((()=>[f(Z,{data:v(x)},null,8,["data"])])),_:1})])),_:1},8,["modelValue"]),p("div",H,[f(d,{onCurrentChange:w,currentPage:v(P),"onUpdate:currentPage":r[1]||(r[1]=a=>h(P)?P.value=a:null),"page-size":30,layout:"prev, pager, next, jumper",total:v(T)},null,8,["currentPage","total"])])])])])}}};export{J as default};
