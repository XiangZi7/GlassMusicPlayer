import{j as t,e as a,g as e,d as l,I as s,S as r,T as i,a as n,t as o,o as c,U as d,V as m,_ as u,b as p,h as y,B as x,m as f,F as g,k as v,w as h,i as w,W as D,X as k}from"./index-CXUs8n8H.js";import{_ as b}from"./index-Dgu7BKRv.js";const C={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const T={name:"mdi-cards-heart-outline",render:function(l,s){return t(),a("svg",C,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"},null,-1)]))}},_={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const L={name:"material-symbols-play-circle-outline",render:function(l,s){return t(),a("svg",_,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"m9.5 16.5l7-4.5l-7-4.5zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}},M={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const S={name:"ic-outline-play-circle",render:function(l,s){return t(),a("svg",M,s[0]||(s[0]=[e("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m-2.5-3.5l7-4.5l-7-4.5z"},null,-1)]))}},q={class:"container p-6 overflow-hidden h-full flex-1"},U={class:"flex gap-6 h-full"},V={key:0,class:"flex-[20%] max-w-[20%] space-y-4 relative"},j=["src"],P={class:"absolute top-0 right-2 bg-gray-400/50 dark:bg-gray-600/50 px-2 py-1 rounded-md text-white text-sm flex items-center gap-1"},N={class:"flex items-center space-x-4"},B={class:"relative flex shrink-0 overflow-hidden rounded-full w-12 h-12"},I=["src"],F={class:"text-lg font-semibold"},z={class:"text-2xl font-bold tracking-tight dark:text-white"},A={class:"flex gap-2 text-muted-foreground dark:text-gray-300 text-sm md:text-base"},K={class:"bg-[var(--el-color-primary)] text-white dark:bg-gray-700 px-2 py-1 rounded-md text-sm"},W=["title"],O={class:"flex gap-1 w-full"},X={class:"flex items-center"},E={class:"text-sm dark:text-gray-300"},G={class:"flex items-center"},H={class:"text-sm dark:text-gray-300"},J={class:"flex items-center"},Q={class:"text-sm dark:text-gray-300"},R={class:"text-muted-foreground dark:text-gray-300 text-sm"},Y={class:"text-muted-foreground dark:text-gray-300 text-sm"},Z={class:"flex flex-col flex-1 overflow-x-hidden"},$={class:"gap-6 flex flex-1"},tt={class:"relative w-full h-full"};const at=u(l({__name:"index",setup(t,{expose:a}){a();const e=s(),l=r(),{play:u,audio:p}=i("MusicPlayer"),y=n({playlistData:{playlist:{tracks:[]}},commentListData:[],drawer:!1}),{playlistData:x,commentListData:f,drawer:g}=o(y);c((()=>{d(e.query.id).then((t=>{y.playlistData=t}))}));const v={route:e,audioStore:l,play:u,audio:p,state:y,playlistData:x,commentListData:f,drawer:g,formatNumber:function(t){if(t<1e4)return t.toString();if(t<1e5){const a=(t/1e4).toFixed(1);return a.endsWith(".0")?a.slice(0,-2)+"万":a+"万"}return(t/1e4).toFixed(0)+"万"},formattedDate:function(t){return new Date(t).toLocaleString()},getCommentPlaylist:(t=1)=>{m({offset:t,id:e.query.id}).then((t=>{y.commentListData=y.commentListData.concat(t.comments)}))},showDrawer:()=>{y.drawer=!0,y.commentListData.length>0||m({offset:1,id:e.query.id}).then((t=>{y.commentListData=t.comments}))},playMusic:()=>{let t=x.value.playlist.tracks.map((t=>({id:t.id,title:t.name,singer:t.ar.map((t=>t.name)).join(" / "),album:t.al.name,cover:t.al.picUrl,time:t.dt,source:"",mv:t.mv})));l.clearAllSong(),l.addTrack(t),l.setCurrentSong(0),p.src="",u()}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(l,s,r,i,n,o){var c,d;const m=S,u=L,C=p("el-button"),_=T,M=k,at=b,et=D;return t(),a("div",q,[e("div",U,[i.playlistData.playlist.coverImgUrl?(t(),a("div",V,[e("img",{alt:"Album cover",class:"w-full aspect-square object-cover rounded-lg shadow-xl",src:i.playlistData.playlist.coverImgUrl+"?param=560y560"},null,8,j),e("div",P,[y(m),x(" "+f(i.formatNumber(i.playlistData.playlist.playCount)),1)]),e("div",N,[e("span",B,[e("img",{class:"aspect-square h-full w-full",alt:"Creator avatar",src:null==(c=i.playlistData.playlist.creator)?void 0:c.avatarUrl},null,8,I)]),e("div",null,[s[2]||(s[2]=e("p",{class:"text-sm font-medium"},"Created by",-1)),e("p",F,f(null==(d=i.playlistData.playlist.creator)?void 0:d.nickname),1)])]),e("h1",z,f(i.playlistData.playlist.name),1),e("div",A,[(t(!0),a(g,null,v(i.playlistData.playlist.tags,(e=>(t(),a("span",K,f(e),1)))),256))]),e("p",{class:"text-muted-foreground dark:text-gray-300 text-sm md:line-clamp-5",title:i.playlistData.playlist.description},f(i.playlistData.playlist.description),9,W),e("div",O,[e("div",X,[y(C,{text:"",circle:"",class:"!p-3",onClick:i.playMusic},{default:h((()=>[y(u,{class:"text-xl dark:text-white"})])),_:1}),e("span",E,f(i.formatNumber(i.playlistData.playlist.playCount)),1)]),e("div",G,[y(C,{text:"",circle:"",class:"!p-3"},{default:h((()=>[y(_,{class:"text-xl dark:text-white"})])),_:1}),e("span",H,f(i.formatNumber(i.playlistData.playlist.subscribedCount)),1)]),e("div",J,[y(C,{text:"",circle:"",class:"!p-3",onClick:i.showDrawer},{default:h((()=>[y(M,{class:"text-xl dark:text-white"})])),_:1}),e("span",Q,f(i.formatNumber(i.playlistData.playlist.commentCount)),1)])]),e("p",R," 创建于"+f(i.formattedDate(i.playlistData.playlist.createTime)),1),e("span",Y," 共"+f(i.playlistData.playlist.trackCount)+"首歌曲 ",1)])):w("",!0),e("div",Z,[e("div",$,[e("div",tt,[y(at,{modelValue:i.playlistData.playlist.tracks,"onUpdate:modelValue":s[0]||(s[0]=t=>i.playlistData.playlist.tracks=t)},null,8,["modelValue"])])])])]),y(et,{modelValue:i.drawer,"onUpdate:modelValue":s[1]||(s[1]=t=>i.drawer=t),data:i.commentListData,onDIntersect:i.getCommentPlaylist},null,8,["modelValue","data"])])}],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/playlist/index.vue"]]);export{at as default};
