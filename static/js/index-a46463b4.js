import{h as L,c as E,a as B,n as C,o as P}from"./element-plus-a16fcaaf.js";import{f as v,Z as U,a7 as G,e as N,o as a,c as l,a as n,U as d,S as p,a9 as K,u as r,z as x,n as z,P as b,a8 as y,Q as q,W as D,O as F,R as Q,a6 as W,ap as Z,aq as j}from"./@vue-b6763d16.js";import{_ as A}from"./index-bedf3ec0.js";import{a as k}from"./axios-e76ab20a.js";import{M as J}from"./markdown-it-1a8517e8.js";import"./@element-plus-3d5ed1a4.js";import"./@vueuse-ae6f4f55.js";import"./lodash-es-9cc69f4e.js";import"./@ctrl-86a38320.js";import"./@popperjs-7c8154ca.js";import"./escape-html-8f174268.js";import"./dayjs-3c9a3002.js";import"./normalize-wheel-es-ed76fb12.js";import"./pinia-358b124a.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./vue-router-6e50d621.js";import"./entities-170e234c.js";import"./uc.micro-740ead6f.js";import"./mdurl-d90eb0f0.js";import"./linkify-it-191b779c.js";import"./punycode-44abc88d.js";const X=""+new URL("../png/1-eac96604.png",import.meta.url).href;const Y=i=>(Z("data-v-d9097c59"),i=i(),j(),i),$={class:"box"},ee={id:"chatbox"},te={key:0,class:"robot"},se=Y(()=>n("img",{class:"avatar",src:X},null,-1)),oe={class:"msg-name"},ae=["innerHTML"],ne={id:"inputbox"},le={__name:"index",setup(i){const h=v(),m=v(),w=new J,t=U({messages:[{id:1,name:"GPT-3.5",text:"Hello",isOther:!0},{id:2,name:"GPT-3.5",text:"Hi",isOther:!1},{id:3,name:"GPT-3.5",text:"How are you?",isOther:!0},{id:4,name:"GPT-3.5",text:"I'm good, thanks!",isOther:!1}],newMessage:"",loading:!1,select:"gpt-3.5-turbo-0613",selectList:[]}),{messages:M,newMessage:u,loading:O,select:_,selectList:T}=G(t);N(()=>{k.get("https://kmapi-6bd1.onrender.com/models").then(({data:s})=>{t.selectList=s.data})});function g(){t.newMessage.trim()!==""&&(t.loading=!0,t.messages.push({id:t.messages.length+1,text:t.newMessage,isOther:!1}),f(),k.get("https://kmapi-6bd1.onrender.com/chat",{params:{kw:t.newMessage,model:t.select}}).then(({data:s})=>{t.messages.push({id:t.messages.length+1,name:s.model,text:s.choices[0].message.content,isOther:!0}),f(),t.loading=!1}),t.newMessage="")}function f(){z(()=>{var s,o,c;((s=m.value)==null?void 0:s.clientHeight)>400&&((c=h.value)==null||c.setScrollTop((o=m.value)==null?void 0:o.clientHeight))})}function V(s){return w.render(s)}return(s,o)=>{const c=L,H=C,R=P,S=E,I=B;return a(),l("div",$,[n("div",ee,[d(c,{ref_key:"scrollbarRef",ref:h,height:"580"},{default:p(()=>[n("div",{ref_key:"innerRef",ref:m},[(a(!0),l(b,null,y(r(M),e=>(a(),l("div",{key:e.id,class:q(["msg",{"message-left":e.isOther,"message-right":!e.isOther}])},[e.isOther?(a(),l("div",te,[se,n("div",oe,D(e.name.toUpperCase()),1)])):F("",!0),n("div",{class:"message-bubble",innerHTML:V(e.text)},null,8,ae)],2))),128))],512)]),_:1},512)]),n("div",ne,[d(S,{placeholder:"Type your message here",onKeyup:K(g,["enter"]),modelValue:r(u),"onUpdate:modelValue":o[1]||(o[1]=e=>x(u)?u.value=e:null),class:"input-with-select"},{prepend:p(()=>[d(R,{modelValue:r(_),"onUpdate:modelValue":o[0]||(o[0]=e=>x(_)?_.value=e:null),placeholder:"请选择模型"},{default:p(()=>[(a(!0),l(b,null,y(r(T),e=>(a(),Q(H,{key:e.id,label:e.id,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["onKeyup","modelValue"]),d(I,{class:"ipt-btn",type:"primary",onClick:g,loading:r(O)},{default:p(()=>[W("发送")]),_:1},8,["loading"])])])}}},He=A(le,[["__scopeId","data-v-d9097c59"]]);export{He as default};
