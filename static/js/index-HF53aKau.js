var Oe=Object.defineProperty,ze=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var me=(e,a,s)=>a in e?Oe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,ne=(e,a)=>{for(var s in a||(a={}))Ie.call(a,s)&&me(e,s,a[s]);if(fe)for(var s of fe(a))Fe.call(a,s)&&me(e,s,a[s]);return e},le=(e,a)=>ze(e,Le(a));var K=(e,a,s)=>new Promise((f,n)=>{var t=r=>{try{g(s.next(r))}catch(l){n(l)}},o=r=>{try{g(s.throw(r))}catch(l){n(l)}},g=r=>r.done?f(r.value):Promise.resolve(r.value).then(t,o);g((s=s.apply(e,a)).next())});import{J as Ke,Q as Ue,R as De,S as Y,T as re,U as ye,d as O,V as ce,W as ue,X as J,L as P,B as R,Y as de,Z as ge,o as V,c as L,O as Ce,g as _,$ as qe,a0 as Ne,a1 as Z,a2 as We,a3 as je,K as U,b as Te,a4 as He,f as d,a5 as j,a6 as Qe,a7 as Xe,a8 as Ye,a9 as H,aa as Je,ab as Ze,ac as ie,ad as Ge,ae as $e,af as pe,ag as et,ah as tt,ai as at,aj as _e,r as we,ak as st,x as nt,al as lt,q as Q,am as ot,an as it,ao as Pe,F as xe,k as Se,a as A,l as X,s as rt,_ as ve,A as ct,t as ut,m as q,w as B,n as W,e as dt,ap as vt}from"./index-xuQRkY2E.js";import{_ as bt}from"./songSheet-Dz3-4JcR.js";import{c as z}from"./strings-IrxcVeqe.js";import"./useIntersectionObserver-Z01xydaK.js";const ft=(e,a,s)=>Ue(e.subTree).filter(t=>{var o;return De(t)&&((o=t.type)==null?void 0:o.name)===a&&!!t.component}).map(t=>t.component.uid).map(t=>s[t]).filter(t=>!!t),mt=(e,a)=>{const s={},f=Ke([]);return{children:f,addChild:o=>{s[o.uid]=o,f.value=ft(e,a,s)},removeChild:o=>{delete s[o],f.value=f.value.filter(g=>g.uid!==o)}}},G=Symbol("tabsRootContextKey"),pt=Y({tabs:{type:re(Array),default:()=>ye([])}}),ke="ElTabBar",_t=O({name:ke}),ht=O(le(ne({},_t),{props:pt,setup(e,{expose:a}){const s=e,f=Z(),n=ce(G);n||ue(ke,"<el-tabs><el-tab-bar /></el-tabs>");const t=J("tabs"),o=P(),g=P(),r=()=>{let m=0,h=0;const v=["top","bottom"].includes(n.props.tabPosition)?"width":"height",u=v==="width"?"x":"y",C=u==="x"?"left":"top";return s.tabs.every(E=>{var i,S;const T=(S=(i=f.parent)==null?void 0:i.refs)==null?void 0:S[`tab-${E.uid}`];if(!T)return!1;if(!E.active)return!0;m=T[`offset${z(C)}`],h=T[`client${z(v)}`];const k=window.getComputedStyle(T);return v==="width"&&(s.tabs.length>1&&(h-=Number.parseFloat(k.paddingLeft)+Number.parseFloat(k.paddingRight)),m+=Number.parseFloat(k.paddingLeft)),!1}),{[v]:`${h}px`,transform:`translate${z(u)}(${m}px)`}},l=()=>g.value=r();return R(()=>s.tabs,()=>K(this,null,function*(){yield de(),l()}),{immediate:!0}),ge(o,()=>l()),a({ref:o,update:l}),(m,h)=>(V(),L("div",{ref_key:"barRef",ref:o,class:Ce([_(t).e("active-bar"),_(t).is(_(n).props.tabPosition)]),style:qe(g.value)},null,6))}}));var yt=Ne(ht,[["__file","tab-bar.vue"]]);const gt=Y({panes:{type:re(Array),default:()=>ye([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ct={tabClick:(e,a,s)=>s instanceof Event,tabRemove:(e,a)=>a instanceof Event},he="ElTabNav",Nt=O({name:he,props:gt,emits:Ct,setup(e,{expose:a,emit:s}){const f=Z(),n=ce(G);n||ue(he,"<el-tabs><tab-nav /></el-tabs>");const t=J("tabs"),o=We(),g=je(),r=P(),l=P(),m=P(),h=P(),v=P(!1),u=P(0),C=P(!1),E=P(!0),i=U(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),S=U(()=>({transform:`translate${i.value==="width"?"X":"Y"}(-${u.value}px)`})),T=()=>{if(!r.value)return;const b=r.value[`offset${z(i.value)}`],p=u.value;if(!p)return;const c=p>b?p-b:0;u.value=c},k=()=>{if(!r.value||!l.value)return;const b=l.value[`offset${z(i.value)}`],p=r.value[`offset${z(i.value)}`],c=u.value;if(b-c<=p)return;const $=b-c>p*2?c+p:b-p;u.value=$},I=()=>K(this,null,function*(){const b=l.value;if(!v.value||!m.value||!r.value||!b)return;yield de();const p=m.value.querySelector(".is-active");if(!p)return;const c=r.value,$=["top","bottom"].includes(n.props.tabPosition),w=p.getBoundingClientRect(),N=c.getBoundingClientRect(),M=$?b.offsetWidth-N.width:b.offsetHeight-N.height,x=u.value;let y=x;$?(w.left<N.left&&(y=x-(N.left-w.left)),w.right>N.right&&(y=x+w.right-N.right)):(w.top<N.top&&(y=x-(N.top-w.top)),w.bottom>N.bottom&&(y=x+(w.bottom-N.bottom))),y=Math.max(y,0),u.value=Math.min(y,M)}),D=()=>{var b;if(!l.value||!r.value)return;e.stretch&&((b=h.value)==null||b.update());const p=l.value[`offset${z(i.value)}`],c=r.value[`offset${z(i.value)}`],$=u.value;c<p?(v.value=v.value||{},v.value.prev=$,v.value.next=$+c<p,p-$<c&&(u.value=p-c)):(v.value=!1,$>0&&(u.value=0))},Me=b=>{const p=b.code,{up:c,down:$,left:w,right:N}=H;if(![c,$,w,N].includes(p))return;const M=Array.from(b.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),x=M.indexOf(b.target);let y;p===w||p===c?x===0?y=M.length-1:y=x-1:x<M.length-1?y=x+1:y=0,M[y].focus({preventScroll:!0}),M[y].click(),be()},be=()=>{E.value&&(C.value=!0)},ee=()=>C.value=!1;return R(o,b=>{b==="hidden"?E.value=!1:b==="visible"&&setTimeout(()=>E.value=!0,50)}),R(g,b=>{b?setTimeout(()=>E.value=!0,50):E.value=!1}),ge(m,D),Te(()=>setTimeout(()=>I(),0)),He(()=>D()),a({scrollToActiveTab:I,removeFocus:ee}),R(()=>e.panes,()=>f.update(),{flush:"post",deep:!0}),()=>{const b=v.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!v.value.prev)],onClick:T},[d(j,null,{default:()=>[d(Qe,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!v.value.next)],onClick:k},[d(j,null,{default:()=>[d(Xe,null,null)]})])]:null,p=e.panes.map((c,$)=>{var w,N,M,x;const y=c.uid,te=c.props.disabled,ae=(N=(w=c.props.name)!=null?w:c.index)!=null?N:`${$}`,se=!te&&(c.isClosable||e.editable);c.index=`${$}`;const Be=se?d(j,{class:"is-icon-close",onClick:F=>s("tabRemove",c,F)},{default:()=>[d(Ye,null,null)]}):null,Ae=((x=(M=c.slots).label)==null?void 0:x.call(M))||c.props.label,Re=!te&&c.active?0:-1;return d("div",{ref:`tab-${y}`,class:[t.e("item"),t.is(n.props.tabPosition),t.is("active",c.active),t.is("disabled",te),t.is("closable",se),t.is("focus",C.value)],id:`tab-${ae}`,key:`tab-${y}`,"aria-controls":`pane-${ae}`,role:"tab","aria-selected":c.active,tabindex:Re,onFocus:()=>be(),onBlur:()=>ee(),onClick:F=>{ee(),s("tabClick",c,ae,F)},onKeydown:F=>{se&&(F.code===H.delete||F.code===H.backspace)&&s("tabRemove",c,F)}},[Ae,Be])});return d("div",{ref:m,class:[t.e("nav-wrap"),t.is("scrollable",!!v.value),t.is(n.props.tabPosition)]},[b,d("div",{class:t.e("nav-scroll"),ref:r},[d("div",{class:[t.e("nav"),t.is(n.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:l,style:S.value,role:"tablist",onKeydown:Me},[e.type?null:d(yt,{ref:h,tabs:[...e.panes]},null),p])])])}}}),Tt=Y({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:re(Function),default:()=>!0},stretch:Boolean}),oe=e=>et(e)||tt(e),$t={[$e]:e=>oe(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>oe(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>oe(e),tabAdd:()=>!0},wt=O({name:"ElTabs",props:Tt,emits:$t,setup(e,{emit:a,slots:s,expose:f}){var n,t;const o=J("tabs"),{children:g,addChild:r,removeChild:l}=mt(Z(),"ElTabPane"),m=P(),h=P((t=(n=e.modelValue)!=null?n:e.activeName)!=null?t:"0"),v=(i,S=!1)=>K(this,null,function*(){var T,k,I;if(!(h.value===i||pe(i)))try{(yield(T=e.beforeLeave)==null?void 0:T.call(e,i,h.value))!==!1&&(h.value=i,S&&(a($e,i),a("tabChange",i)),(I=(k=m.value)==null?void 0:k.removeFocus)==null||I.call(k))}catch(D){}}),u=(i,S,T)=>{i.props.disabled||(v(S,!0),a("tabClick",i,T))},C=(i,S)=>{i.props.disabled||pe(i.props.name)||(S.stopPropagation(),a("edit",i.props.name,"remove"),a("tabRemove",i.props.name))},E=()=>{a("edit",void 0,"add"),a("tabAdd")};return Je({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},U(()=>!!e.activeName)),R(()=>e.activeName,i=>v(i)),R(()=>e.modelValue,i=>v(i)),R(h,()=>K(this,null,function*(){var i;yield de(),(i=m.value)==null||i.scrollToActiveTab()})),Ze(G,{props:e,currentName:h,registerPane:r,unregisterPane:l}),f({currentName:h}),()=>{const i=s.addIcon,S=e.editable||e.addable?d("span",{class:o.e("new-tab"),tabindex:"0",onClick:E,onKeydown:I=>{I.code===H.enter&&E()}},[i?ie(s,"addIcon"):d(j,{class:o.is("icon-plus")},{default:()=>[d(Ge,null,null)]})]):null,T=d("div",{class:[o.e("header"),o.is(e.tabPosition)]},[S,d(Nt,{ref:m,currentName:h.value,editable:e.editable,type:e.type,panes:g.value,stretch:e.stretch,onTabClick:u,onTabRemove:C},null)]),k=d("div",{class:o.e("content")},[ie(s,"default")]);return d("div",{class:[o.b(),o.m(e.tabPosition),{[o.m("card")]:e.type==="card",[o.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[T,k]:[k,T]])}}}),Pt=Y({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),xt=["id","aria-hidden","aria-labelledby"],Ve="ElTabPane",St=O({name:Ve}),kt=O(le(ne({},St),{props:Pt,setup(e){const a=e,s=Z(),f=at(),n=ce(G);n||ue(Ve,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=J("tab-pane"),o=P(),g=U(()=>a.closable||n.props.closable),r=_e(()=>{var u;return n.currentName.value===((u=a.name)!=null?u:o.value)}),l=P(r.value),m=U(()=>{var u;return(u=a.name)!=null?u:o.value}),h=_e(()=>!a.lazy||l.value||r.value);R(r,u=>{u&&(l.value=!0)});const v=we({uid:s.uid,slots:f,props:a,paneName:m,active:r,index:o,isClosable:g});return Te(()=>{n.registerPane(v)}),st(()=>{n.unregisterPane(v.uid)}),(u,C)=>_(h)?nt((V(),L("div",{key:0,id:`pane-${_(m)}`,class:Ce(_(t).b()),role:"tabpanel","aria-hidden":!_(r),"aria-labelledby":`tab-${_(m)}`},[ie(u.$slots,"default")],10,xt)),[[lt,_(r)]]):Q("v-if",!0)}}));var Ee=Ne(kt,[["__file","tab-pane.vue"]]);const Vt=ot(wt,{TabPane:Ee}),Et=it(Ee),Mt={class:"playlist mt-2"},Bt={class:"cover"},At={class:"title"},Rt={class:"artist"},Ot=O({__name:"ASongList",props:{modelValue:{type:Array},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=Pe(e,"modelValue");return(s,f)=>{const n=rt;return V(),L("div",Mt,[(V(!0),L(xe,null,Se(a.value,t=>(V(),L("div",{key:t.id,class:"song"},[A("div",Bt,[d(n,{src:t.coverImgUrl+"?param=450y450",alt:t.name},null,8,["src","alt"])]),A("div",At,X(t.name),1),A("div",Rt,X(t.creator.nickname),1)]))),128))])}}}),zt=ve(Ot,[["__scopeId","data-v-a296107f"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/pages/search/components/ASongList.vue"]]),Lt={class:"mvlist mt-2"},It={class:"cover"},Ft=["src"],Kt={class:"title"},Ut={class:"artist"},Dt=O({__name:"AMV",props:{modelValue:{type:Array},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=Pe(e,"modelValue");return(s,f)=>(V(),L("div",Lt,[(V(!0),L(xe,null,Se(a.value,n=>(V(),L("div",{key:n.id,class:"mv"},[A("div",It,[A("img",{src:n.cover+"?param=500y250",alt:"mv 1 Title"},null,8,Ft)]),A("div",Kt,X(n.name),1),A("div",Ut,X(n.artistName),1)]))),128))]))}}),qt=ve(Dt,[["__scopeId","data-v-7428fe7b"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/pages/search/components/AMV.vue"]]),Wt=A("label",null,"歌曲",-1),jt=A("label",null,"歌单",-1),Ht=A("label",null,"MV",-1),Qt=O({__name:"index",setup(e){const a=ct(),s=we({activeName:"1",list:[],songTotal:{songCount:0,playlistCount:0,mvCount:0}}),{songTotal:f,list:n,activeName:t}=ut(s);function o(r){dt({kw:a.query.kw,type:s.activeName,offset:r}).then(({result:l})=>{if(l){const m=l.songs||l.playlists||l.mvs||[];s.list=r?s.list.concat(m):s.list=m,l.songCount!==void 0&&(s.songTotal.songCount=l.songCount),l.playlistCount!==void 0&&(s.songTotal.playlistCount=l.playlistCount),l.mvCount!==void 0&&(s.songTotal.mvCount=l.mvCount)}else console.error("result is undefined. Cannot proceed.")}).catch(l=>{console.error("An error occurred:",l)})}function g(){s.list=[],o()}return R(()=>a.query.kw,()=>{s.list=[],o()},{immediate:!0}),(r,l)=>{const m=vt,h=bt,v=Et,u=Vt;return V(),q(u,{modelValue:_(t),"onUpdate:modelValue":l[3]||(l[3]=C=>W(t)?t.value=C:null),onTabClick:g},{default:B(()=>[d(v,{name:"1"},{label:B(()=>[d(m,{hidden:_(f).songCount==0,value:_(f).songCount,max:99,type:"primary"},{default:B(()=>[Wt]),_:1},8,["hidden","value"])]),default:B(()=>[_(t)=="1"?(V(),q(h,{key:0,modelValue:_(n),"onUpdate:modelValue":l[0]||(l[0]=C=>W(n)?n.value=C:null),onQuery:o},null,8,["modelValue"])):Q("",!0)]),_:1}),d(v,{name:"1000"},{label:B(()=>[d(m,{hidden:_(f).playlistCount==0,value:_(f).playlistCount,max:99,type:"primary"},{default:B(()=>[jt]),_:1},8,["hidden","value"])]),default:B(()=>[_(t)=="1000"?(V(),q(zt,{key:0,modelValue:_(n),"onUpdate:modelValue":l[1]||(l[1]=C=>W(n)?n.value=C:null)},null,8,["modelValue"])):Q("",!0)]),_:1}),d(v,{name:"1004"},{label:B(()=>[d(m,{hidden:_(f).mvCount==0,value:_(f).mvCount,max:99,type:"primary"},{default:B(()=>[Ht]),_:1},8,["hidden","value"])]),default:B(()=>[_(t)=="1004"?(V(),q(qt,{key:0,modelValue:_(n),"onUpdate:modelValue":l[2]||(l[2]=C=>W(n)?n.value=C:null)},null,8,["modelValue"])):Q("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),ea=ve(Qt,[["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/pages/search/index.vue"]]);export{ea as default};
