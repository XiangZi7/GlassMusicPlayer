import{_ as e}from"./index-63790c63.js";import{f as s,Z as r,a7 as a,x as t,e as o,o as n,c as i,a as d,W as c,u as l,X as u}from"./@vue-06d7d904.js";import"./element-plus-2073bb18.js";import"./@element-plus-788c49e3.js";import"./@vueuse-45103712.js";import"./lodash-es-57caac06.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-2f7c2e90.js";import"./dayjs-4d0ffb58.js";import"./normalize-wheel-es-3222b0a2.js";import"./pinia-da509d88.js";import"./pinia-plugin-persist-70d140bd.js";import"./axios-a8ee11a1.js";import"./vue-router-f9877ca9.js";const p={class:"music-player"},m={class:"controls"},b={class:"time"},f=["src"],g=e({__name:"index",setup(e){const g=s(),v=r({list:[],playing:!1,currentIndex:0,mode:0,progress:0,duration:0,currentTime:0,songs:[{name:"歌曲1",src:"https://cn-scya-ct-01-03.bilivideo.com/mefmxcodeboss/aod/202112/13/76e0f45f3b756cb5fd82f4024a7e4b7e.m4a?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&uipk=5&nbs=1&deadline=1685005922&gen=playurlv2&os=bcache&oi=2104912314&trid=0000e70271b5204f4af5bc9ee48f1da1d033B&mid=0&platform=html5&upsig=13e2f675be1a5aeb3dfdd01c79f6dae1&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform&cdnid=62703&bvc=vod&nettype=0&orderid=0,1&logo=00000000"},{name:"歌曲2",src:"https://cn-jxjj-ct-01-01.bilivideo.com/mefmxcodeboss/aod/202106/14/f14b848a15d6357bf2b5dc9c14fcb633.m4a?e=ig8euxZM2rNcNbdlhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&uipk=5&nbs=1&deadline=1685005996&gen=playurlv2&os=bcache&oi=2104912314&trid=0000067ed8353dcc4d5096a47f4dbf757368B&mid=0&platform=html5&upsig=ab517e53df7a09c7cb1fc36ab45886ae&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,mid,platform&cdnid=4261&bvc=vod&nettype=0&orderid=0,1&logo=00000000"}]}),{list:h,currentTime:x,duration:j,progress:y}=a(v),k=t((()=>v.songs[v.currentIndex])),T=t((()=>["顺序播放","单曲循环","随机播放"][v.mode]));o((()=>{g.value.src=k.value.src}));const I=()=>{v.playing?(v.playing=!1,g.value.pause()):(v.playing=!0,g.value.play())},N=()=>{0===v.currentIndex?v.currentIndex=v.songs.length-1:v.currentIndex--,E()},C=()=>{v.currentIndex===v.songs.length-1?v.currentIndex=0:v.currentIndex++,E()},E=()=>{g.value.src=k.value.src,g.value.play(),v.playing=!0},M=()=>{switch(v.mode){case 0:C();break;case 1:E();break;case 2:const e=Math.floor(Math.random()*v.songs.length);v.currentIndex=e,E()}},_=()=>{v.currentTime=Math.floor(g.value.currentTime),v.progress=v.currentTime/v.duration*100},q=()=>{v.duration=Math.floor(g.value.duration)},B=()=>{2===v.mode?v.mode=0:v.mode++},w=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return(e,s)=>(n(),i("div",p,[d("div",m,[d("button",{onClick:N},"上一首"),d("button",{onClick:I},c(e.playing?"暂停":"播放"),1),d("button",{onClick:C},"下一首"),d("button",{onClick:B},c(l(T)),1)]),d("div",{class:"progress",onClick:s[0]||(s[0]=e=>(e=>{const s=e.currentTarget.getBoundingClientRect(),r=s.width,a=(e.clientX-s.left)/r;g.value.currentTime=v.duration*a})(e))},[d("div",{class:"bar",style:u({width:l(y)+"%"})},null,4),d("div",{class:"thumb",style:u({left:l(y)+"%"})},null,4),d("div",b,c(w(l(x)))+" / "+c(w(l(j))),1)]),d("audio",{ref_key:"audio",ref:g,src:l(k).src,onTimeupdate:_,onDurationchange:q,onEnded:M},null,40,f)]))}},[["__scopeId","data-v-76097b36"]]);export{g as default};
