var R=(e,t,r)=>new Promise((n,o)=>{var i=m=>{try{u(r.next(m))}catch(l){o(l)}},c=m=>{try{u(r.throw(m))}catch(l){o(l)}},u=m=>m.done?n(m.value):Promise.resolve(m.value).then(i,c);u((r=r.apply(e,t)).next())});import"./vue-p0u6Eb0Z.js";import{d as F,c as Le}from"./pinia-5HN42grN.js";import{E as B,a as Pe,b as Te,c as Se,d as be,e as Ie,f as Ee,g as Ve,h as Ce,i as qe,j as De}from"./element-plus-AwQlIQB9.js";import{I as Ae,o as _,c as v,a as s,d as O,F as ue,u as a,Y as $,a8 as A,e as h,b as P,G as U,r as M,g as Ke,O as de,an as _e,V as x,T as me,ao as j,ap as N,$ as Re,af as Ue,R as Be,aq as Oe,a7 as He,U as X,a6 as J,W as pe,Z,n as ze,f as re,k as Fe,J as je,aa as Ne,_ as Qe,ar as Ye,as as Ge}from"./@vue--I1QRiKn.js";import{a as We}from"./axios-52F-EHG1.js";import{N as ee}from"./nprogress-8aEWLQce.js";import{u as he,c as Ze,a as Xe}from"./vue-router-Yf1wvZ1L.js";import{A as Je,H as et,V as tt,C as ot,S as nt,t as st}from"./@element-plus-Pvb0mBOn.js";import{s as rt}from"./pinia-plugin-persistedstate-XbYvz584.js";import"./@vueuse-_HHU54sX.js";import"./lodash-es-S-9mw2Ow.js";import"./@ctrl--dareiTT.js";import"./@popperjs-NiN61gaS.js";import"./@babel-3yCADe9Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const Q=(e,t)=>({key:e,storage:localStorage,paths:t}),it=F({id:"useThemeStore",state:()=>({primary:"#409EFF",isDark:!1}),actions:{setIsDark(e){this.isDark=e},setPrimary(e){this.primary=e}},persist:Q("useThemeStore")});function ve(e){var o;if(!/^#?[0-9A-Fa-f]{6}$/.test(e)){B.warning("输入错误的hex");return}return e=e.replace("#",""),((o=e.match(/../g))!=null?o:[]).map(i=>parseInt(i,16))}function fe(e,t,r){const n=/^\d{1,3}$/;if(!n.test(String(e))||!n.test(String(t))||!n.test(String(r))){B.warning("输入错误的rgb颜色值");return}return`#${[e,t,r].map(i=>i.toString(16).padStart(2,"0")).join("")}`}function ct(e,t){if(!/^#?[0-9A-Fa-f]{6}$/.test(e)){B.warning("输入错误的hex颜色值");return}let n=ve(e);return n=n.map(o=>Math.floor(o*(1-t))),fe(n[0],n[1],n[2])}function at(e,t){if(!/^#?[0-9A-Fa-f]{6}$/.test(e)){B.warning("输入错误的hex颜色值");return}let n=ve(e);return n=n.map(o=>Math.floor((255-o)*t+o)),fe(n[0],n[1],n[2])}const lt=()=>{const e=it(),t=()=>{const n=document.documentElement;e.isDark?n.classList.add("dark"):n.classList.remove("dark")},r=n=>{n||(n="#409EFF",B({type:"success",message:"主题颜色已重置为 #409EFF"})),e.setPrimary(n),document.documentElement.style.setProperty("--el-color-primary-dark-2",`${ct(e.primary,.1)}`),document.documentElement.style.setProperty("--el-color-primary",e.primary);for(let o=1;o<=9;o++)document.documentElement.style.setProperty(`--el-color-primary-light-${o}`,`${at(e.primary,o/10)}`)};return Ae(()=>{t(),r(e.primary)}),{switchDark:t,changePrimary:r}},ut={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},dt=s("path",{fill:"currentColor",d:"M14 20.725v-2.05q2.25-.65 3.625-2.5t1.375-4.2q0-2.35-1.375-4.2T14 5.275v-2.05q3.1.7 5.05 3.138T21 11.975q0 3.175-1.95 5.613T14 20.725M3 15V9h4l5-5v16l-5-5zm11 1V7.95q1.175.55 1.838 1.65T16.5 12q0 1.275-.663 2.363T14 16"},null,-1),_t=[dt];function mt(e,t){return _(),v("svg",ut,[..._t])}const pt={name:"material-symbols-volume-up",render:mt},ht={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},vt=s("path",{fill:"currentColor",d:"M9 16h2V8H9zm4 0h2V8h-2zm-1 6q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"},null,-1),ft=[vt];function gt(e,t){return _(),v("svg",ht,[...ft])}const yt={name:"material-symbols-pause-circle",render:gt},$t={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},wt=s("path",{fill:"currentColor",d:"m10.65 15.75l4.875-3.125q.35-.225.35-.625t-.35-.625L10.65 8.25q-.375-.25-.763-.038t-.387.663v6.25q0 .45.388.663t.762-.038M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"},null,-1),xt=[wt];function Mt(e,t){return _(),v("svg",$t,[...xt])}const kt={name:"material-symbols-play-circle-rounded",render:Mt},Lt={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Pt=s("path",{fill:"currentColor",d:"M6 5a1 1 0 0 0-2 0v22a1 1 0 1 0 2 0zm22.003 1.504c0-2.002-2.236-3.192-3.897-2.073l-14.003 9.432A2.5 2.5 0 0 0 10.09 18l14.003 9.56c1.66 1.132 3.91-.056 3.91-2.065z"},null,-1),Tt=[Pt];function St(e,t){return _(),v("svg",Lt,[...Tt])}const bt={name:"fluent-previous32-filled",render:St},It=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0");return`${t}:${r}`},hs=e=>{let t=parseInt((e/1e3/60).toString()),r=parseInt((e/1e3%60).toString());return t<10&&(t="0"+t),r<10&&(r="0"+r),t+":"+r},Et={class:"music-player"},Vt={class:"cover-info yx-col-8"},Ct={class:"cover cursor-pointer"},qt=["src","alt"],Dt={class:"song-info"},At={class:"song-title"},Kt={class:"artist flex items-center h-[50px]"},Rt={class:"ml-3 Lyric"},Ut={class:"controls items-center yx-col-8"},Bt={class:"flex text-xl items-center gap-2"},Ot={class:"flex items-center gap-3 slider-box w-full"},Ht={class:"text-sm left text-[var(--prism-color)]"},zt={class:"text-sm right text-[var(--prism-color)]"},Ft={class:"volume flex items-center yx-col-offset-4 yx-col-4"},jt={class:"w-[120px] flex"},Nt=O({__name:"Km-Player",emits:["showDrawer"],setup(e,{emit:t}){const r=ue("musicPlayer");if(!r)throw new Error("musicPlayer is not provided.");const{currentTrackSong:n,currentTime:o,duration:i,volume:c,isPlaying:u,LyricList:m,currentLyricIndex:l,changeCurrentTime:p,setVolume:d,play:f,pause:T,prevTrack:C,nextTrack:b}=r;function I(D){return It(D)}const K=t;function E(){K("showDrawer")}return(D,y)=>{var w,q;const H=bt,Y=kt,G=yt,z=Pe,S=pt;return _(),v("div",Et,[s("div",Vt,[s("div",Ct,[s("img",{src:a(n).cover,alt:a(n).title,onClick:E},null,8,qt)]),s("div",Dt,[s("div",At,$(a(n).title),1),s("div",Kt,[A($(a(n).singer)+" ",1),s("div",Rt,[s("div",null,$((w=a(m)[a(l)])==null?void 0:w.lrc),1),s("div",null,$((q=a(m)[a(l)])==null?void 0:q.tlyric),1)])])])]),s("div",Ut,[s("div",Bt,[h(H,{onClick:a(C)},null,8,["onClick"]),a(u)?(_(),P(G,{key:1,class:"text-3xl",onClick:a(T)},null,8,["onClick"])):(_(),P(Y,{key:0,class:"text-3xl",onClick:a(f)},null,8,["onClick"])),h(H,{class:"trfo",onClick:a(b)},null,8,["onClick"])]),s("div",Ot,[s("span",Ht,$(I(a(o))),1),h(z,{modelValue:a(o),"onUpdate:modelValue":y[0]||(y[0]=V=>U(o)?o.value=V:null),max:a(i),"show-tooltip":!1,onChange:a(p)},null,8,["modelValue","max","onChange"]),s("span",zt,$(I(a(i))),1)])]),s("div",Ft,[s("div",jt,[h(S,{class:"text-2xl mr-1"}),h(z,{modelValue:a(c),"onUpdate:modelValue":y[1]||(y[1]=V=>U(c)?c.value=V:null),onChange:a(d)},null,8,["modelValue","onChange"])])])])}}}),k=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},Qt=k(Nt,[["__scopeId","data-v-d7540f56"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/Km-Player/Km-Player.vue"]]);ee.configure({easing:"ease",speed:500,showSpinner:!0,trickleSpeed:200,minimum:.3});const te=We.create({baseURL:"https://www.xiangzi77.tk/",timeout:1e4,withCredentials:!0});te.interceptors.request.use(e=>{var t;return e.headers=(t=e.headers)!=null?t:{},e.params===void 0&&(e.params={}),Object.assign(e.params,{timestamp:Date.now()}),ee.start(),e},e=>Promise.reject(e));te.interceptors.response.use(e=>(ee.done(),e.data),e=>Promise.reject(e));const L=(e,t)=>te.get(e,{params:t}),vs=e=>L(`cloudsearch?keywords=${encodeURIComponent(e.kw||"")}&limit=30&offset=${((e.offset||1)-1)*30}&type=${e.type||1}`),fs=e=>L(`song/url/v1?id=${e}&level=exhigh`),gs=e=>L(`video/search?name=${encodeURIComponent(e.name)}`),ys=e=>L(`video/chapter?id=${e}`),Yt=()=>L("/login/qr/key"),Gt=e=>L(`/login/qr/create?key=${encodeURIComponent(e)}&qrimg=true`),Wt=e=>L(`/login/qr/check?key=${encodeURIComponent(e)}`),Zt=()=>L("/login/status"),Xt=e=>L(`/lyric?id=${e}`),$s=()=>L("/mv/first"),ws=e=>L(`mv/url?id=${e}`),ge=F({id:"useUserStore",state:()=>({userInfo:{}}),actions:{setUserInfo(e){this.userInfo=e}},persist:Q("useUserStore")});function Jt(e){const t=M(""),r=M(""),n=M(null);let o=null;const i=ge(),c=()=>R(this,null,function*(){try{const d=yield Yt();return t.value=d.data.unikey,d.data.unikey}catch(d){console.error("获取二维码 key 失败:",d)}}),u=()=>R(this,null,function*(){try{const d=yield c(),f=yield Gt(d);r.value=f.data.qrimg}catch(d){console.error("创建二维码失败:",d)}}),m=()=>R(this,null,function*(){try{const d=yield Wt(t.value);n.value=d,d.code===800?(clearInterval(o),yield u(),l()):d.code===803&&(p(),Zt().then(({data:f})=>{const{nickname:T,avatarUrl:C,userId:b}=f.profile,I={nickname:T,avatarUrl:C,userId:b};i.setUserInfo(I),e(!0)}))}catch(d){console.error("检查二维码状态失败:",d)}}),l=()=>{o=setInterval(()=>{m()},3e3)},p=()=>{o!==null&&(clearInterval(o),o=null)};return Ke(()=>R(this,null,function*(){yield u(),l()})),de(()=>{p()}),{qrKey:t,qrImgUrl:r,qrStatus:n,stopPolling:p}}const ye=e=>(j("data-v-65fb67bd"),e=e(),N(),e),eo={class:"qr-container"},to=ye(()=>s("h1",null,"扫码登录",-1)),oo={class:"qr-image flex items-center justify-center h-[180px]"},no=["src"],so={class:"flex flex-col gap-1 items-center"},ro=ye(()=>s("p",{class:"instructions"},"请使用移动端网易云音乐扫描上方二维码登录",-1)),io=O({__name:"User-Login",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=_e(e,"modelValue");function r(){t.value=!1}const{qrImgUrl:n,qrStatus:o}=Jt(r);return(i,c)=>{const u=Te,m=Se;return _(),P(m,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=l=>t.value=l),width:"30%"},{default:x(()=>{var l,p,d,f;return[s("div",eo,[to,s("div",oo,[s("img",{src:a(n),alt:"二维码登录"},null,8,no)]),s("div",so,[(l=a(o))!=null&&l.avatarUrl?(_(),P(u,{key:0,class:"mt-3",src:(p=a(o))==null?void 0:p.avatarUrl,shape:"circle"},null,8,["src"])):me("",!0),s("div",null,$((d=a(o))==null?void 0:d.nickname),1),s("div",null,"qrStatus:"+$(((f=a(o))==null?void 0:f.message)||"加载中..."),1),ro])])]}),_:1},8,["modelValue"])}}}),co=k(io,[["__scopeId","data-v-65fb67bd"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/User-Login.vue"]]),ao={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},lo=s("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[s("path",{d:"M12 8.25a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5M9.75 12a2.25 2.25 0 1 1 4.5 0a2.25 2.25 0 0 1-4.5 0"}),s("path",{d:"M12 1.25c-.705 0-1.348.194-2.051.52c-.68.317-1.469.783-2.454 1.367l-.754.446c-.986.584-1.773 1.05-2.38 1.496c-.628.462-1.11.934-1.458 1.553c-.348.618-.505 1.279-.58 2.063c-.073.76-.073 1.691-.073 2.861v.888c0 1.17 0 2.1.073 2.86c.075.785.232 1.446.58 2.064c.349.619.83 1.091 1.458 1.553c.607.446 1.394.912 2.38 1.496l.754.446c.985.584 1.773 1.05 2.454 1.367c.703.326 1.346.52 2.051.52c.705 0 1.348-.194 2.051-.52c.68-.317 1.469-.783 2.454-1.367l.754-.446c.986-.584 1.773-1.05 2.38-1.496c.628-.462 1.11-.934 1.458-1.553c.348-.618.505-1.279.58-2.063c.073-.76.073-1.691.073-2.86v-.889c0-1.17 0-2.1-.073-2.86c-.075-.785-.232-1.446-.58-2.064c-.349-.619-.83-1.091-1.458-1.553c-.607-.446-1.394-.912-2.38-1.496l-.754-.446c-.985-.584-1.773-1.05-2.454-1.367c-.703-.326-1.346-.52-2.051-.52M8.225 4.447c1.027-.608 1.751-1.035 2.356-1.316c.59-.274 1.01-.381 1.419-.381c.41 0 .83.107 1.42.38c.604.282 1.328.71 2.355 1.317l.686.407c1.027.608 1.75 1.037 2.29 1.434c.526.387.83.71 1.038 1.08c.21.371.33.806.395 1.47c.065.68.066 1.54.066 2.756v.812c0 1.216 0 2.075-.066 2.755c-.064.665-.185 1.1-.395 1.471c-.208.37-.512.693-1.038 1.08c-.54.397-1.263.826-2.29 1.434l-.686.407c-1.027.608-1.751 1.035-2.356 1.316c-.59.274-1.01.381-1.419.381c-.41 0-.83-.107-1.42-.38c-.604-.282-1.328-.71-2.355-1.317l-.686-.407c-1.027-.608-1.75-1.037-2.29-1.434c-.526-.387-.83-.71-1.038-1.08c-.21-.371-.331-.806-.395-1.47c-.065-.68-.066-1.54-.066-2.756v-.812c0-1.216 0-2.075.066-2.755c.064-.665.185-1.1.394-1.471c.209-.37.513-.693 1.04-1.08c.54-.397 1.262-.826 2.29-1.434z"})],-1),uo=[lo];function _o(e,t){return _(),v("svg",ao,[...uo])}const mo={name:"solar-settings-minimalistic-outline",render:_o},po={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ho=s("path",{fill:"currentColor",d:"M5 19q-.425 0-.712-.288T4 18q0-.425.288-.712T5 17h1v-7q0-2.075 1.25-3.687T10.5 4.2v-.7q0-.625.438-1.062T12 2q.625 0 1.063.438T13.5 3.5v.7q2 .5 3.25 2.113T18 10v7h1q.425 0 .713.288T20 18q0 .425-.288.713T19 19zm7 3q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-4-5h8v-7q0-1.65-1.175-2.825T12 6q-1.65 0-2.825 1.175T8 10z"},null,-1),vo=[ho];function fo(e,t){return _(),v("svg",po,[...vo])}const go={name:"material-symbols-notifications-outline-rounded",render:fo},yo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$o=s("path",{fill:"currentColor",d:"M5.615 20q-.69 0-1.152-.462Q4 19.075 4 18.385V5.615q0-.69.463-1.152Q4.925 4 5.615 4h6.404v1H5.615q-.23 0-.423.192Q5 5.385 5 5.615v12.77q0 .23.192.423q.193.192.423.192h6.404v1zm10.847-4.462l-.702-.719l2.319-2.319H9.192v-1h8.887l-2.32-2.32l.703-.718L20 12z"},null,-1),wo=[$o];function xo(e,t){return _(),v("svg",yo,[...wo])}const Mo={name:"material-symbols-light-logout",render:xo},ko={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},Lo=s("path",{fill:"currentColor",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"},null,-1),Po=[Lo];function To(e,t){return _(),v("svg",ko,[...Po])}const So={name:"bi-github",render:To},bo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Io=s("path",{fill:"currentColor",d:"M10 22L0 12L10 2l1.775 1.775L3.55 12l8.225 8.225z"},null,-1),Eo=[Io];function Vo(e,t){return _(),v("svg",bo,[...Eo])}const Co={name:"material-symbols-arrow-back-ios",render:Vo},qo=e=>(j("data-v-8a4f310f"),e=e(),N(),e),Do={class:"header w-full flex items-center"},Ao=qo(()=>s("div",{class:"menu-circle"},null,-1)),Ko={class:"w-[40px] flex"},Ro={class:"search-bar"},Uo={class:"about ml-3 flex"},Bo={class:"flex gap-2 items-center"},Oo={class:"flex gap-2 items-center"},Ho={class:"flex justify-end ml-auto items-center gap-2 text-[var(--prism-color)]"},zo={key:0,class:"flex items-center gap-3"},Fo=["src"],jo={class:"text-[14px] text-[var(--prism-color)]"},No=O({__name:"Header",setup(e){const t=he(),r=Re({kw:"",showLogin:!1}),{kw:n,showLogin:o}=Ue(r),i=ge();function c(m){return Object.keys(m).length>0}function u(){t.push({path:"/search",query:{kw:r.kw}})}return(m,l)=>{const p=Co,d=So,f=be,T=Mo,C=Ie,b=Ee,I=Ve,K=go,E=mo,D=co;return _(),v("header",Do,[Ao,s("div",Ko,[h(p,{class:"cursor-pointer",onClick:l[0]||(l[0]=y=>a(t).back())}),h(p,{class:"cursor-pointer trfo",onClick:l[1]||(l[1]=y=>a(t).forward())})]),s("div",Ro,[Be(s("input",{"onUpdate:modelValue":l[2]||(l[2]=y=>U(n)?n.value=y:null),type:"text",placeholder:"Search",onKeyup:He(u,["enter"])},null,544),[[Oe,a(n)]])]),s("div",null,[s("div",Uo,[h(f,{href:"https://github.com/XiangZi7/KM-Music-Player/",target:"_blank",tag:"a",class:"yx-tag"},{default:x(()=>[s("div",Bo,[h(d),A(" Profile ")])]),_:1}),h(f,{href:"https://github.com/XiangZi7/",target:"_blank",tag:"a",class:"yx-tag"},{default:x(()=>[s("div",Oo,[h(d),A(" GitHub ")])]),_:1})])]),s("div",Ho,[c(a(i).userInfo)?(_(),v("div",zo,[h(I,null,{dropdown:x(()=>[h(b,null,{default:x(()=>[h(C,null,{default:x(()=>[h(T),A(" 退出 ")]),_:1})]),_:1})]),default:x(()=>[s("img",{class:"profile-img",src:a(i).userInfo.avatarUrl,alt:""},null,8,Fo)]),_:1}),s("div",jo,$(a(i).userInfo.nickname),1),h(K),h(E)])):(_(),v("div",{key:1,onClick:l[3]||(l[3]=y=>o.value=!0)},[h(f,{type:"primary",icon:a(Je),round:""},{default:x(()=>[A("登录")]),_:1},8,["icon"])]))]),a(o)?(_(),P(D,{key:0,modelValue:a(o),"onUpdate:modelValue":l[4]||(l[4]=y=>U(o)?o.value=y:null)},null,8,["modelValue"])):me("",!0)])}}}),Qo=k(No,[["__scopeId","data-v-8a4f310f"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/layouts/components/Header.vue"]]),Yo="/static/png/logo2-YnrPoFgV.png",Go={name:"MdiMusicBoxMultipleOutline"},Wo={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Zo=s("path",{fill:"currentColor",d:"M20 2H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2m0 14H8V4h12m-7.5 11a2.5 2.5 0 0 0 2.5-2.5V7h3V5h-4v5.5c-.42-.31-.93-.5-1.5-.5a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5M4 6H2v14a2 2 0 0 0 2 2h14v-2H4"},null,-1),Xo=[Zo];function Jo(e,t,r,n,o,i){return _(),v("svg",Wo,[...Xo])}const en=k(Go,[["render",Jo],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/MdiMusicBoxMultipleOutline.vue"]]),tn={name:"StreamlineMusicFolderSong"},on={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 14 14"},nn=s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[s("path",{d:"M4.645 11a.88.88 0 1 0 0-1.759a.88.88 0 0 0 0 1.76Zm3.957-1.099a.88.88 0 1 0 0-1.76a.88.88 0 0 0 0 1.76"}),s("path",{d:"M5.525 10.12V6.339l3.957-.932v3.616"}),s("path",{d:"M.5 12.25V1.75a1 1 0 0 1 1-1h3.69a1 1 0 0 1 1 .76l.31 1.24h6a1 1 0 0 1 1 1v8.5a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1"})],-1),sn=[nn];function rn(e,t,r,n,o,i){return _(),v("svg",on,[...sn])}const cn=k(tn,[["render",rn],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/StreamlineMusicFolderSong.vue"]]),an={name:"MingcuteMovieLine"},ln={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},un=s("g",{fill:"none"},[s("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),s("path",{fill:"currentColor",d:"M12 2c5.523 0 10 4.477 10 10a9.982 9.982 0 0 1-3.76 7.814l-.239.186H20a1 1 0 0 1 .117 1.993L20 22h-8C6.477 22 2 17.523 2 12S6.477 2 12 2m0 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16m0 10a2 2 0 1 1 0 4a2 2 0 0 1 0-4m-4-4a2 2 0 1 1 0 4a2 2 0 0 1 0-4m8 0a2 2 0 1 1 0 4a2 2 0 0 1 0-4m-4-4a2 2 0 1 1 0 4a2 2 0 0 1 0-4"})],-1),dn=[un];function _n(e,t,r,n,o,i){return _(),v("svg",ln,[...dn])}const mn=k(an,[["render",_n],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/MingcuteMovieLine.vue"]]),pn={name:"MdiTestTube"},hn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},vn=s("path",{fill:"currentColor",d:"M7 2v2h1v14a4 4 0 0 0 4 4a4 4 0 0 0 4-4V4h1V2zm4 14c-.6 0-1-.4-1-1s.4-1 1-1s1 .4 1 1s-.4 1-1 1m2-4c-.6 0-1-.4-1-1s.4-1 1-1s1 .4 1 1s-.4 1-1 1m1-5h-4V4h4z"},null,-1),fn=[vn];function gn(e,t,r,n,o,i){return _(),v("svg",hn,[...fn])}const yn=k(pn,[["render",gn],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/MdiTestTube.vue"]]),$n=[{title:"",child:[{title:"首页",icon:et,router:"/"}]},{title:"发现",child:[{title:"乐库",icon:en,router:"/library"},{title:"视频",icon:tt,router:"/video"},{title:"歌单",icon:cn,router:"/songList"},{title:"动漫",icon:mn,router:"/anim"},{title:"聊天AI",icon:ot,router:"/chat"},{title:"设置",icon:nt,router:"/setting"},{title:"测试",icon:yn,router:"/test"}]},{title:"美化",child:[{title:"主题",icon:st,router:"/theme"}]}],wn=e=>(j("data-v-d4c4a47c"),e=e(),N(),e),xn={class:"left-side"},Mn=wn(()=>s("div",{class:"side-wrapper"},[s("div",{class:"side-title flex",style:{"justify-content":"center"}},[s("img",{src:Yo,alt:"",style:{width:"150px"}})])],-1)),kn={class:"side-title mt-2 mb-2"},Ln={class:"side-menu"},Pn=["onClick"],Tn={__name:"SideBar",setup(e){const t=he();return(r,n)=>(_(),v("aside",xn,[Mn,(_(!0),v(X,null,J(a($n),o=>(_(),v("div",{key:o.title,class:"side-box"},[s("div",kn,$(o.title),1),s("div",Ln,[(_(!0),v(X,null,J(o.child,i=>(_(),v("div",{key:i.title,class:"side-item",onClick:c=>a(t).push({path:i.router})},[(_(),P(pe(i.icon))),A(" "+$(i.title),1)],8,Pn))),128))])]))),128))]))}},Sn=k(Tn,[["__scopeId","data-v-d4c4a47c"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/layouts/components/SideBar.vue"]]),bn="/static/png/vinyl-LVrkN1rc.png",In={class:"flex min-w-0",style:{"flex-flow":"row wrap"}},En={class:"yx-col-12"},Vn={class:"flex items-center justify-center h-full relative"},Cn={class:"yx-col-12"},qn={class:"lyrics-container"},Dn=O({__name:"PlayerDrawer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=ue("musicPlayer");if(!t)throw new Error("musicPlayer is not provided.");const{LyricList:r,currentLyricIndex:n,lyricTranslateY:o,currentTrackSong:i,isPlaying:c}=t,u=_e(e,"modelValue");return(m,l)=>{const p=Ce,d=qe;return _(),P(d,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=f=>u.value=f),style:Z([{"--track-cover-url":`url(${a(i).cover})`},{"box-shadow":"none"}]),"destroy-on-close":"",modal:!1,title:"",class:"drawer-bg",direction:"ttb",size:"89.6%"},{default:x(()=>[s("div",In,[s("div",En,[s("div",Vn,[h(p,{style:{height:"350px",width:"350px"},lazy:"",loading:"lazy",class:"z-20",src:a(i).cover+"?param=500y500"},null,8,["src"]),s("img",{style:Z({animationPlayState:a(c)?"running":"paused"}),src:bn,class:"w-[350px] h-[350px] absolute right-[-15px] z-10 rotate"},null,4)])]),s("div",Cn,[s("div",qn,[s("ul",{style:Z({transform:`translateY(${a(o)}px)`})},[(_(!0),v(X,null,J(a(r),(f,T)=>(_(),v("li",{key:T,class:ze({highlight:T===a(n)})},[s("div",null,$(f.lrc),1),s("div",null,$(f.tlyric),1)],2))),128))],4)])])])]),_:1},8,["modelValue","style"])}}}),An=k(Dn,[["__scopeId","data-v-32d2eb7e"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/Km-Player/components/PlayerDrawer.vue"]]),Kn=F({id:"useMusicStore",state:()=>({count:0,trackList:[{id:"27591651",title:"Intro AE 86",singer:"陈光荣",album:"頭文字[イニシャル]D THE MOVIE SOUND TUNE",cover:"http://p4.music.126.net/9KeyafHLjadqSQTRS_tN5Q==/5741649720318487.jpg",source:"http://music.163.com/song/media/outer/url?id=27591651.mp3",time:149e3,mv:"",Lyric:{}},{id:"409872504",title:"Ninelie",singer:"Aimer",album:"ninelie EP",cover:"http://p3.music.126.net/g7aakYG_Wfmrn1_IDfVUXA==/109951165050166241.jpg",source:"http://music.163.com/song/media/outer/url?id=409872504.mp3",time:260675,mv:"",Lyric:{}}],currentIndex:0}),actions:{addTrackAndPlay(e){Array.isArray(e)?this.trackList=this.trackList.concat(e):this.trackList.push(e)},setCurrentIndex(e){this.currentIndex=e}},persist:Q("musicStore")}),Rn=F({id:"useSettingStore",state:()=>({loadLyric:!1}),actions:{setLoadLyric(e){this.loadLyric=e}},persist:Q("useSettingStore")}),ie=e=>{if(!e)return[];const t=e.split(`
`),r=[];return t.forEach(n=>{var u,m;const o=[...n.matchAll(/\[(\d{2}):(\d{2}\.\d{2,3})\]/g)],c=(m=(u=n.split(/\[.*?\]/g).pop())==null?void 0:u.trim())!=null?m:"";o.length&&c&&o.forEach(l=>{const p=parseInt(l[1]),d=parseFloat(l[2]);r.push({time:p*60+d,lrc:c})})}),r},ce=(e,t)=>{const r=ie(e||""),n=ie(t||""),o=[];return r.forEach(i=>{var u;const c=((u=n.find(m=>m.time===i.time))==null?void 0:u.lrc)||"";o.push({time:i.time,tlyric:c,lrc:i.lrc})}),o};function Un(){const e=Kn(),t=Rn(),r=e.trackList,n=new Audio,o=M(!1),i=re(()=>e.currentIndex),c=M(0),u=M(0),m=M(50),l=M([]),p=M(0),d=M(0),f=re(()=>r[i.value]),C=setInterval(()=>{c.value=n.currentTime},1e3);de(()=>{clearInterval(C)});const b=S=>{n.src=r[S].source,n.load(),c.value=0,u.value=0,n.addEventListener("loadedmetadata",()=>{u.value=n.duration}),l.value=[],I(r[S].id)},I=S=>{if(!t.loadLyric)return;const w=e.trackList[i.value];if(!w.Lyric)Xt(S).then(({lrc:q,tlyric:V})=>{w.Lyric={lrc:q.lyric,tlyric:V?V.lyric:""};const W=ce(w.Lyric.lrc||"",w.Lyric.tlyric||"");l.value=W});else{const q=ce(w.Lyric.lrc||"",w.Lyric.tlyric||"");l.value=q}};function K(){if(l.value.length===0)return;const S=l.value.findIndex((we,xe,Me)=>{var ne,se;const ke=(se=(ne=Me[xe+1])==null?void 0:ne.time)!=null?se:1/0;return c.value>=we.time&&c.value<ke});p.value=S===-1?l.value.length-1:S;const w=46,V=600/2,W=p.value*w;d.value=-(W-V+w/2)}Fe(K);const E=()=>{n.src!==r[i.value].source&&b(i.value),n.play(),o.value=!0},D=()=>{n.pause(),o.value=!1},y=()=>{e.setCurrentIndex((i.value+1)%r.length),E()},H=()=>{e.setCurrentIndex((i.value+r.length-1)%r.length),E()},Y=()=>{n.currentTime=c.value},G=()=>{n.volume=m.value*.01};n.addEventListener("ended",y);const z=()=>{e.setCurrentIndex(e.trackList.length-1),E()};return b(i.value),{isPlaying:o,currentTrackIndex:i,currentTime:c,duration:u,play:E,pause:D,nextTrack:y,prevTrack:H,changeCurrentTime:Y,currentTrackSong:f,setVolume:G,volume:m,LyricList:l,currentLyricIndex:p,lyricTranslateY:d,addTrackAndPlay:z}}const Bn=e=>(j("data-v-dd9bf3bf"),e=e(),N(),e),On={class:"Music-App"},Hn={class:"wrapper"},zn={class:"main-container w-full"},Fn={class:"content-wrapper"},jn=Bn(()=>s("div",{class:"h-[90px]"},null,-1)),Nn={__name:"index",setup(e){je("musicPlayer",Un());const t=M(!1);return(r,n)=>{const o=Ne("router-view"),i=De,c=Qt;return _(),v("div",On,[h(Qo),s("div",Hn,[h(Sn),s("div",zn,[h(i,null,{default:x(()=>[s("div",Fn,[h(o,null,{default:x(({Component:u})=>[h(Qe,{appear:"",name:"fade-transform",mode:"out-in"},{default:x(()=>[(_(),P(Ye,null,[(_(),P(pe(u)))],1024))]),_:2},1024)]),_:1})]),jn]),_:1}),h(An,{modelValue:a(t),"onUpdate:modelValue":n[0]||(n[0]=u=>U(t)?t.value=u:null)},null,8,["modelValue"]),h(c,{onShowDrawer:n[1]||(n[1]=u=>t.value=!a(t))})])])])}}},Qn=k(Nn,[["__scopeId","data-v-dd9bf3bf"],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/layouts/index.vue"]]),Yn=O({__name:"App",setup(e){return lt(),(t,r)=>(_(),P(Qn))}}),Gn=k(Yn,[["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/App.vue"]]),Wn="modulepreload",Zn=function(e){return"/"+e},ae={},g=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link");o=Promise.all(r.map(c=>{if(c=Zn(c),c in ae)return;ae[c]=!0;const u=c.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===c&&(!u||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Wn,u||(p.as="script",p.crossOrigin=""),p.href=c,document.head.appendChild(p),u)return new Promise((d,f)=>{p.addEventListener("load",d),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>t()).catch(i=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i})},le=[{path:"/",name:"/",component:()=>g(()=>import("./index-mM9imUew.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))},{path:"/:notFound(.*)",name:"/[...notFound]",component:()=>g(()=>import("./_...notFound_-DUjaV30v.js"),__vite__mapDeps([20,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18]))},{path:"/anim",children:[{path:"",name:"/anim/",component:()=>g(()=>import("./index-yXfECgBH.js"),__vite__mapDeps([21,2,3,17,12,5,6,7,8,9,10,11,13,14,15,16,18,22]))},{path:"animeDetails",children:[{path:"",name:"/anim/animeDetails/",component:()=>g(()=>import("./index-QPekYR45.js"),__vite__mapDeps([23,5,2,3,6,7,8,9,10,11,24,12,13,14,15,16,17,18,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]))},{path:"AnimeDetails",name:"/anim/animeDetails/AnimeDetails",component:()=>g(()=>import("./AnimeDetails-_ZDTp-h2.js"),__vite__mapDeps([24,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18,25]))},{path:"playVideo",name:"/anim/animeDetails/playVideo",component:()=>g(()=>import("./playVideo-SVtq3Vo3.js"),__vite__mapDeps([26,2,3,27,28,29,15,30,31,32,33,34,35,36,37,38,39,40,12,5,6,7,8,9,10,11,13,14,16,17,18,41]))}]}]},{path:"/chat",children:[{path:"",name:"/chat/",component:()=>g(()=>import("./index-JhDC-XVL.js"),__vite__mapDeps([43,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18]))}]},{path:"/library",children:[{path:"",name:"/library/",component:()=>g(()=>import("./index-91V_x8Nb.js"),__vite__mapDeps([44,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18]))}]},{path:"/search",children:[{path:"",name:"/search/",component:()=>g(()=>import("./index-a_UFZCV1.js"),__vite__mapDeps([45,5,2,3,6,7,8,9,10,11,1,4,17,12,13,14,15,16,18,46]))}]},{path:"/setting",children:[{path:"",name:"/setting/",component:()=>g(()=>import("./index-sfecPxr0.js"),__vite__mapDeps([47,5,2,3,6,7,8,9,10,11,12,13,14,15,16,17,18,48]))}]},{path:"/songList",children:[{path:"",name:"/songList/",component:()=>g(()=>import("./index-oNEBSxVZ.js"),__vite__mapDeps([49,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18]))}]},{path:"/test",children:[{path:"",name:"/test/",component:()=>g(()=>import("./index-uIrV1N97.js"),__vite__mapDeps([50,2,3,12,5,6,7,8,9,10,11,13,14,15,16,17,18]))}]},{path:"/theme",children:[{path:"",name:"/theme/",component:()=>g(()=>import("./index-FkCMi_x_.js"),__vite__mapDeps([51,5,2,3,6,7,8,9,10,11,13,12,14,15,16,17,18,52]))}]},{path:"/video",children:[{path:"",name:"/video/",component:()=>g(()=>import("./index-92fJfF6C.js"),__vite__mapDeps([53,2,3,17,12,5,6,7,8,9,10,11,13,14,15,16,18,54]))},{path:":id",name:"/video/[id]",component:()=>g(()=>import("./_id_-6JE-JdcA.js"),__vite__mapDeps([55,2,3,17,12,5,6,7,8,9,10,11,13,14,15,16,18]))}]}];function Xn(e){const{extendRoutes:t}=e;return Ze(Object.assign(e,{routes:typeof t=="function"?t(le):le}))}const Jn=Xn({history:Xe()}),$e=Le();$e.use(rt);const oe=Ge(Gn);oe.use(Jn);oe.use($e);oe.mount("#app");export{k as _,ys as a,fs as b,vs as c,Rn as d,it as e,hs as f,lt as g,ws as h,$s as m,Kn as u,gs as v};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/index-mM9imUew.js","static/js/songSheet-4SLetYKM.js","static/js/vue-p0u6Eb0Z.js","static/js/@vue--I1QRiKn.js","static/css/songSheet-8K81NBPp.css","static/js/element-plus-AwQlIQB9.js","static/js/@element-plus-Pvb0mBOn.js","static/js/@vueuse-_HHU54sX.js","static/js/lodash-es-S-9mw2Ow.js","static/js/@ctrl--dareiTT.js","static/js/@popperjs-NiN61gaS.js","static/css/element-plus-z_GPOaoj.css","static/js/pinia-5HN42grN.js","static/js/axios-52F-EHG1.js","static/js/nprogress-8aEWLQce.js","static/js/@babel-3yCADe9Y.js","static/css/nprogress-CEL4D4aq.css","static/js/vue-router-Yf1wvZ1L.js","static/js/pinia-plugin-persistedstate-XbYvz584.js","static/css/index-YyHTA8B8.css","static/js/_...notFound_-DUjaV30v.js","static/js/index-yXfECgBH.js","static/css/index-t-KoJS0A.css","static/js/index-QPekYR45.js","static/js/AnimeDetails-_ZDTp-h2.js","static/css/AnimeDetails-oX_yskzs.css","static/js/playVideo-SVtq3Vo3.js","static/js/@videojs-player-21XytARP.js","static/js/video.js-k6REY0Z6.js","static/js/global-ZBe6n8GH.js","static/js/keycode-pxTP6kIv.js","static/js/safe-json-parse-vIMuPyfy.js","static/js/@videojs-V0voznOz.js","static/js/is-function-iySP_FXR.js","static/js/url-toolkit-ldl6XOlE.js","static/js/videojs-vtt.js-iCsKab_u.js","static/js/m3u8-parser-Z0COmfzX.js","static/js/mpd-parser-sihpe6-w.js","static/js/@xmldom-OwpznvVO.js","static/js/mux.js-fTfKC5mz.js","static/css/video-P1TgXm7o.css","static/css/playVideo-uao_Fpsj.css","static/css/index-H_yskBMD.css","static/js/index-JhDC-XVL.js","static/js/index-91V_x8Nb.js","static/js/index-a_UFZCV1.js","static/css/index-90YfTEIk.css","static/js/index-sfecPxr0.js","static/css/index-6G-X4-x2.css","static/js/index-oNEBSxVZ.js","static/js/index-uIrV1N97.js","static/js/index-FkCMi_x_.js","static/css/index-Ilq-IbHS.css","static/js/index-92fJfF6C.js","static/css/index-ZhC-wyIs.css","static/js/_id_-6JE-JdcA.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
