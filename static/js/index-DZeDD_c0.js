import{d as t,a as e,t as s,u as a,r as l,K as n,o as r,L as i,M as o,N as c,O as u,_ as d,b as p,e as m,h as b,w as f,g as h,i as y,F as g,k as x,j as v,l as w,m as k,A as L}from"./index-BncAeWnX.js";const P={class:"p-6 h-full w-full"},_={key:0,class:"mb-2"},C={class:"flex space-x-2"},j=["onClick"],M=["src","alt"],K={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},S={class:"text-white text-sm font-semibold truncate"},U={class:"text-white text-xs truncate"},E={key:1},I={class:"pb-2"},N={class:"flex space-x-2"},O={class:"grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-8"},$=["onClick"],z=["src","alt"],A={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},F={class:"text-white text-sm font-semibold truncate"},q={class:"text-white text-xs truncate"};const B=d(t({__name:"index",setup(t,{expose:d}){d();const p=e({Playlist:[],bannersList:[],subList:[],currentCat:"欧美",newestLsit:[]}),{Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y}=s(p),g=a(),x=l([]);function v(t){o({offset:t+1}).then((({playlists:t})=>{p.Playlist=p.Playlist.concat(t)}))}n(x,{initialPageNum:1,pageSize:10,threshold:.1},v),r((()=>{Promise.all([i(),o({offset:1,limit:20}),c(),u()]).then((([t,e,s,a])=>{p.bannersList=t.banners,p.Playlist=e.playlists,p.subList=s.sub,p.newestLsit=a.albums})).catch((t=>{}))}));const w={state:p,Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y,router:g,observedElement:x,handleIntersect:v,handleCat:function(t){h.value=t,o({cat:t}).then((({playlists:t})=>{p.Playlist=t}))}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(t,e,s,a,l,n){const r=p("el-image"),i=p("el-carousel-item"),o=p("el-carousel"),c=p("el-scrollbar"),u=p("el-button");return v(),m("div",P,[b(o,{interval:4e3,type:"card",height:"auto",autoplay:""},{default:f((()=>[(v(!0),m(g,null,x(a.bannersList,(t=>(v(),w(i,{key:t,class:"!h-28 md:!h-60 lg:!h-64"},{default:f((()=>[b(r,{class:"!rounded-lg",src:t.imageUrl},null,8,["src"])])),_:2},1024)))),128))])),_:1}),a.newestLsit.length>0?(v(),m("div",_,[e[0]||(e[0]=h("h1",{class:"text-2xl font-bold"},"最新专辑",-1)),b(c,{class:"py-4"},{default:f((()=>[h("div",C,[(v(!0),m(g,null,x(a.newestLsit,(t=>(v(),m("div",{class:"relative flex-[180px] shrink-0 rounded-lg cursor-pointer",key:t.id,onClick:e=>a.router.push(`/album?id=${t.id}`)},[h("img",{src:t.picUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,M),h("div",K,[h("h3",S,k(t.name),1),h("p",U,k(t.artist.name),1)])],8,j)))),128))])])),_:1})])):y("",!0),a.Playlist.length>0?(v(),m("div",E,[e[1]||(e[1]=h("h1",{class:"text-2xl font-bold mb-4"},"热门歌单",-1)),h("div",I,[b(c,{class:"pb-4"},{default:f((()=>[h("div",N,[(v(!0),m(g,null,x(a.subList,(t=>(v(),w(u,{class:"!rounded-xl transition duration-200",style:{},type:a.currentCat==t.name?"primary":"",key:t.name,onClick:e=>a.handleCat(t.name)},{default:f((()=>[L(k(t.name),1)])),_:2},1032,["type","onClick"])))),128))])])),_:1})]),h("div",O,[(v(!0),m(g,null,x(a.Playlist,(t=>(v(),m("div",{class:"group relative rounded-lg overflow-hidden cursor-pointer",key:t.id,onClick:e=>a.router.push(`/playlist?id=${t.id}`),ref_for:!0,ref:"observedElement"},[h("img",{src:t.coverImgUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,z),h("div",A,[h("h3",F,k(t.name),1),h("p",q,k(t.description),1)])],8,$)))),128))])])):y("",!0)])}],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/index.vue"]]);export{B as default};
