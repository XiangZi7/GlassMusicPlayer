var a=(a,s,t)=>new Promise(((e,l)=>{var i=a=>{try{n(t.next(a))}catch(s){l(s)}},r=a=>{try{n(t.throw(a))}catch(s){l(s)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(i,r);n((t=t.apply(a,s)).next())}));import{k as s,j as t,o as e,a as l,p as i,b as r,d as n}from"./element-plus-2073bb18.js";import{_ as o}from"./musicTable-dff33bd3.js";import{e as c,p as m,f as d,h as p}from"./index-63790c63.js";import{b as u}from"./vue-router-f9877ca9.js";import{Z as v,a7 as f,e as y,h as j,n as h,o as g,c as b,a as _,U as k,S as x,u as U,W as D,a6 as L,P as I,a8 as q,R as w,z as P,O as z}from"./@vue-06d7d904.js";import"./@element-plus-788c49e3.js";import"./@vueuse-45103712.js";import"./lodash-es-57caac06.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-2f7c2e90.js";import"./dayjs-4d0ffb58.js";import"./normalize-wheel-es-3222b0a2.js";import"./formatTime-d6dfa579.js";import"./pinia-da509d88.js";import"./pinia-plugin-persist-70d140bd.js";import"./axios-a8ee11a1.js";const B={class:"content-section menuBar-mv"},V={class:"m-artist"},N={class:"artist-avatar"},S={class:"artist-name"},T={class:"artist-h2"},A={class:"listcover"},C={href:"javascript:;"},O={class:"playerButton"},R={class:"tags"},W=_("i",{class:"el-icon-date"},null,-1),Z=_("i",{class:"el-icon-date"},null,-1),E={class:"content-section",style:{"margin-top":"0"}},F={class:"apps-card"},G={class:"app-card__subtext"},H={key:0,class:"app-card__footer"},J={__name:"index",setup(J){const K=c(),M=u(),Q=v({list:[],playlists:{creator:{nickname:"",avatarUrl:""}},tableData:[],activeName:"first",commList:{comments:[{user:{avatarUrl:"",nickname:""},ipLocation:{location:""}}]},loading:!0}),{list:X,playlists:Y,tableData:$,activeName:aa,commList:sa,loading:ta}=f(Q);y((()=>{ea()})),j((()=>M.query.id),(()=>{M.query.id&&ea()}));const ea=()=>{Q.loading=!0,h((()=>a(this,null,(function*(){m(M.query.id).then((({data:a})=>{Q.playlists=a.playlist,Q.tableData=a.playlist.tracks.map((a=>{const s=a.ar.map((a=>a.name)).join(",");return{cover:a.al.picUrl,title:a.name,singer:s,album:a.al.name,time:a.dt,id:a.id,mv:a.mv}})),Q.loading=!1})),d({id:M.query.id,limit:20,offset:0}).then((({data:a})=>{Q.commList=a}))}))))},la=()=>a(this,null,(function*(){const a=Q.tableData.map((a=>a.id)).join(","),s=yield p({id:a}),t=Q.tableData.map(((a,t)=>{const e=s.data.data.find((s=>s.id==a.id));return{title:a.title,singer:a.singer,cover:a.cover,src:e.url,time:a.time,album:a.album,id:a.id,mv:a.mv}}));K.songs.push(...t);const e=K.songs.findIndex((a=>a.id==Q.tableData[0].id));K.currentIndex=e}));return(a,c)=>{const m=t,d=e,p=l,u=i,v=o,f=r,y=n,j=s;return g(),b("div",null,[_("div",null,[_("div",B,[k(j,{rows:5,animated:"",loading:U(ta)},{default:x((()=>[_("div",V,[_("div",N,[k(m,{src:U(Y).coverImgUrl+"?param=250y250"},null,8,["src"])]),_("div",S,[_("h2",T,D(U(Y).name),1),_("div",A,[k(d,{size:30,src:U(Y).creator.avatarUrl+"?param=60y60"},null,8,["src"]),_("a",C,D(U(Y).creator.nickname),1)]),_("div",O,[k(p,{type:"primary",round:"",onClick:la},{default:x((()=>[L("播放全部")])),_:1})]),_("div",R,[(g(!0),b(I,null,q(U(Y).tags,((a,s)=>(g(),w(u,{class:"tags-item",key:s},{default:x((()=>[L(D(a),1)])),_:2},1024)))),128))]),_("p",null,D(U(Y).description),1)])]),k(y,{modelValue:U(aa),"onUpdate:modelValue":c[0]||(c[0]=a=>P(aa)?aa.value=a:null)},{default:x((()=>[k(f,{name:"first"},{label:x((()=>[_("span",null,[W,L(" 歌单("+D(U(Y).trackIds.length)+")",1)])])),default:x((()=>[k(v,{data:U($)},null,8,["data"])])),_:1}),k(f,{name:"second"},{label:x((()=>[_("span",null,[Z,L(" 评论("+D(U(sa).total)+")",1)])])),default:x((()=>[_("div",E,[_("div",F,[(g(!0),b(I,null,q(U(sa).comments,((a,s)=>(g(),b("div",{class:"app-card usercom",key:s},[_("span",null,[k(m,{class:"useravatar",src:a.user.avatarUrl+"?param=32y32",alt:""},null,8,["src"]),L(" "+D(a.user.nickname),1)]),_("div",G,D(a.content),1),a.ipLocation.location?(g(),b("div",H,[_("span",null,"IP:"+D(a.ipLocation.location),1),_("span",null,D(a.timeStr),1)])):z("",!0)])))),128))])])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["loading"])])])])}}};export{J as default};
