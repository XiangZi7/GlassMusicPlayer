import{r as e,ak as a,al as n,Y as t,am as i,an as r,ao as l,a8 as u,ap as o,aq as s,ar as c,o as v,ai as g}from"./index-BtbcwaGJ.js";function m(e){var a;const n=r(e);return null!=(a=null==n?void 0:n.$el)?a:n}const p=c?window:void 0,h=c?window.navigator:void 0;function d(a){const n=function(){const a=e(!1),n=g();return n&&v((()=>{a.value=!0}),n),a}();return u((()=>(n.value,Boolean(a()))))}function f(a={}){const{navigator:u=h}=a,o=["chargingchange","chargingtimechange","dischargingtimechange","levelchange"],s=d((()=>u&&"getBattery"in u&&"function"==typeof u.getBattery)),c=e(!1),v=e(0),g=e(0),f=e(1);let y;function w(){c.value=this.charging,v.value=this.chargingTime||0,g.value=this.dischargingTime||0,f.value=this.level}return s.value&&u.getBattery().then((e=>{y=e,w.call(y),function(...e){let a,u,o,s;if("string"==typeof e[0]||Array.isArray(e[0])?([u,o,s]=e,a=p):[a,u,o,s]=e,!a)return n;Array.isArray(u)||(u=[u]),Array.isArray(o)||(o=[o]);const c=[],v=()=>{c.forEach((e=>e())),c.length=0},g=t((()=>[m(a),r(s)]),(([e,a])=>{if(v(),!e)return;const n=i(a)?{...a}:a;c.push(...u.flatMap((a=>o.map((t=>((e,a,n,t)=>(e.addEventListener(a,n,t),()=>e.removeEventListener(a,n,t)))(e,a,t,n))))))}),{immediate:!0,flush:"post"}),h=()=>{g(),v()};l(h)}(y,o,w,{passive:!0})})),{isSupported:s,charging:c,chargingTime:v,dischargingTime:g,level:f}}function y(n={}){const t=e(),i=d((()=>"undefined"!=typeof performance&&"memory"in performance));if(i.value){const{interval:e=1e3}=n;a((()=>{t.value=performance.memory}),e,{immediate:n.immediate,immediateCallback:n.immediateCallback})}return{isSupported:i,memory:t}}function w(a,n={}){const{pitch:i=1,rate:c=1,volume:v=1,window:g=p}=n,m=g&&g.speechSynthesis,h=d((()=>m)),f=e(!1),y=e("init"),w=o(a||""),S=o(n.lang||"en-US"),A=s(void 0),k=e=>{e.lang=r(S),e.voice=r(n.voice)||null,e.pitch=r(i),e.rate=r(c),e.volume=v,e.onstart=()=>{f.value=!0,y.value="play"},e.onpause=()=>{f.value=!1,y.value="pause"},e.onresume=()=>{f.value=!0,y.value="play"},e.onend=()=>{f.value=!1,y.value="end"},e.onerror=e=>{A.value=e}},B=u((()=>{f.value=!1,y.value="init";const e=new SpeechSynthesisUtterance(w.value);return k(e),e}));return h.value&&(k(B.value),t(S,(e=>{B.value&&!f.value&&(B.value.lang=e)})),n.voice&&t(n.voice,(()=>{m.cancel()})),t(f,(()=>{f.value?m.resume():m.pause()}))),l((()=>{f.value=!1})),{isSupported:h,isPlaying:f,status:y,utterance:B,error:A,stop:()=>{m.cancel(),f.value=!1},toggle:(e=!f.value)=>{f.value=e},speak:()=>{m.cancel(),B&&m.speak(B.value)}}}export{y as a,f as b,w as u};
