import{d as t,a as e,t as s,u as a,r as l,J as r,o as n,K as i,L as o,M as c,N as u,_ as d,b as p,e as m,f as b,i as f,w as h,h as y,F as v,k as x,l as g,m as w,z as L}from"./index-BZIVKEkD.js";const k={class:"p-6 h-full w-full"},_={class:"mb-2"},P={class:"flex space-x-2"},C=["onClick"],M=["src","alt"],j={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},I={class:"text-white text-sm font-semibold truncate"},K={class:"text-white text-xs truncate"},S={class:"pb-2"},U={class:"flex space-x-2"},z={class:"grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-8"},E=["onClick"],N=["src","alt"],$={class:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4 rounded-b-lg"},F={class:"text-white text-sm font-semibold truncate"},J={class:"text-white text-xs truncate"};const O=d(t({__name:"index",setup(t,{expose:d}){d();const p=e({Playlist:[],bannersList:[],subList:[],currentCat:"欧美",newestLsit:[]}),{Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y}=s(p),v=a(),x=l([]);function g(t){o({offset:t+1}).then((({playlists:t})=>{p.Playlist=p.Playlist.concat(t)}))}r(x,{initialPageNum:1,pageSize:10,threshold:.1},g),n((()=>{Promise.all([i(),o({offset:1,limit:20}),c(),u()]).then((([t,e,s,a])=>{p.bannersList=t.banners,p.Playlist=e.playlists,p.subList=s.sub,p.newestLsit=a.albums})).catch((t=>{}))}));const w={state:p,Playlist:m,bannersList:b,subList:f,currentCat:h,newestLsit:y,router:v,observedElement:x,handleIntersect:g,handleCat:function(t){h.value=t,o({cat:t}).then((({playlists:t})=>{p.Playlist=t}))}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(t,e,s,a,l,r){const n=p("el-image"),i=p("el-carousel-item"),o=p("el-carousel"),c=p("el-scrollbar"),u=p("el-button");return m(),b("div",k,[f(o,{interval:4e3,type:"card",height:"auto",autoplay:""},{default:h((()=>[(m(!0),b(v,null,x(a.bannersList,(t=>(m(),g(i,{key:t,class:"!h-28 md:!h-60 lg:!h-64"},{default:h((()=>[f(n,{class:"!rounded-lg",src:t.imageUrl},null,8,["src"])])),_:2},1024)))),128))])),_:1}),y("div",_,[e[0]||(e[0]=y("h1",{class:"text-2xl font-bold"},"最新专辑",-1)),f(c,{class:"py-4"},{default:h((()=>[y("div",P,[(m(!0),b(v,null,x(a.newestLsit,(t=>(m(),b("div",{class:"relative flex-[180px] shrink-0 rounded-lg cursor-pointer",key:t.id,onClick:e=>a.router.push(`/album?id=${t.id}`)},[y("img",{src:t.picUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,M),y("div",j,[y("h3",I,w(t.name),1),y("p",K,w(t.artist.name),1)])],8,C)))),128))])])),_:1})]),y("div",null,[e[1]||(e[1]=y("h1",{class:"text-2xl font-bold mb-4"},"热门歌单",-1)),y("div",S,[f(c,{class:"pb-4"},{default:h((()=>[y("div",U,[(m(!0),b(v,null,x(a.subList,(t=>(m(),g(u,{class:"!rounded-xl transition duration-200",style:{},type:a.currentCat==t.name?"primary":"",key:t.name,onClick:e=>a.handleCat(t.name)},{default:h((()=>[L(w(t.name),1)])),_:2},1032,["type","onClick"])))),128))])])),_:1})]),y("div",z,[(m(!0),b(v,null,x(a.Playlist,(t=>(m(),b("div",{class:"group relative rounded-lg overflow-hidden cursor-pointer",key:t.id,onClick:e=>a.router.push(`/playlist?id=${t.id}`),ref_for:!0,ref:"observedElement"},[y("img",{src:t.coverImgUrl+"?param=360y360",alt:t.name,class:"w-full h-auto rounded-lg object-cover transition-all duration-300 group-hover:opacity-80"},null,8,N),y("div",$,[y("h3",F,w(t.name),1),y("p",J,w(t.description),1)])],8,E)))),128))])])])}],["__scopeId","data-v-ceb91f59"],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/index.vue"]]);export{O as default};
