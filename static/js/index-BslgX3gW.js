import{d as e,a as t,t as a,u as s,r as l,n,o as i,p as r,s as o,_ as c,b as u,e as d,f as p,i as m,w as f,h as y,F as C,k as g,m as h}from"./index-BBUwUJAk.js";const v={class:"h-full w-full p-4"},x={class:"flex items-center"},P={class:"flex-1 pt-4 grid gap-4 grid-cols-[repeat(auto-fill,minmax(180px,1fr))]"},b=["onClick"],_={class:"p-2"},w={class:"font-medium text-sm line-clamp-1"},L={class:"flex items-center w-full gap-2 text-sm text-muted-foreground"},k={class:"text-xs line-clamp-1"};const M=c(e({__name:"index",setup(e,{expose:c}){c();const u=t({Playlist:[],CatList:[{name:"全部",label:"全部"}],currentCat:["全部"]}),{currentCat:d,CatList:p,Playlist:m}=a(u),f=s(),y=l([]);function C(e){r({offset:e+1,cat:u.currentCat}).then((({playlists:e})=>{u.Playlist=u.Playlist.concat(e)}))}n(y,{initialPageNum:1,pageSize:10,threshold:.1},C),i((()=>{r({offset:1,cat:u.currentCat}).then((({playlists:e})=>{u.Playlist=e})),o().then((({sub:e})=>{u.CatList=u.CatList.concat(e)}))}));const g={state:u,currentCat:d,CatList:p,Playlist:m,router:f,observedElement:y,handleIntersect:C,catChange:function(e){u.Playlist=[],r({offset:1,cat:e.join()}).then((({playlists:e})=>{u.Playlist=e}))}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(e,t,a,s,l,n){const i=u("el-select-v2"),r=u("el-image");return d(),p("div",v,[m(i,{modelValue:s.currentCat,"onUpdate:modelValue":t[0]||(t[0]=e=>s.currentCat=e),filterable:"",options:s.CatList,style:{width:"240px"},multiple:"",clearable:"",props:{label:"name",value:"name"},onChange:s.catChange},{default:f((({item:e})=>[y("div",x,[y("span",null,h(e.name),1)])])),_:1},8,["modelValue","options"]),y("section",P,[(d(!0),p(C,null,g(s.Playlist,(e=>(d(),p("div",{class:"group relative rounded-lg overflow-hidden cursor-pointer",key:e.id,ref_for:!0,ref:"observedElement",onClick:t=>s.router.push(`/songlist?id=${e.id}`)},[m(r,{src:e.coverImgUrl+"?param=260y260",lazy:"",class:"transition-opacity rounded-lg"},null,8,["src"]),y("div",_,[y("h3",w,h(e.name),1),y("div",L,[y("span",k,h(e.description),1)])])],8,b)))),128))])])}],["__file","/home/runner/work/KMMusicPlayer/KMMusicPlayer/src/views/discover/songlist/index.vue"]]);export{M as default};
