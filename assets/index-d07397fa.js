import{M as C,v as j,r as R,t as S,o as T,K as F,N as M,a as d,b as _,c as v,f as a,d as c,w as i,e,O as P,P as z,i as o,g,F as w,h as I,m as A,k as E,p as J,Q as K}from"./index-b248589c.js";import{_ as O}from"./musicTable-457f0f0d.js";import"./formatTime-3cb25965.js";const Q={class:"content-section menuBar-mv"},$={class:"m-artist"},G={class:"artist-avatar"},H={class:"artist-name"},W={class:"artist-h2"},X={class:"listcover"},Y={href:"javascript:;"},Z={class:"playerButton"},aa={class:"tags"},ta=a("i",{class:"el-icon-date"},null,-1),sa=a("i",{class:"el-icon-date"},null,-1),ea={class:"content-section",style:{"margin-top":"0"}},na={class:"apps-card"},oa={class:"app-card__subtext"},la={key:0,class:"app-card__footer"},_a={__name:"index",setup(ca){const h=C(),f=j(),l=R({list:[],playlists:{creator:{nickname:"",avatarUrl:""}},tableData:[],activeName:"first",commList:{comments:[{user:{avatarUrl:"",nickname:""},ipLocation:{location:""}}]},loading:!0}),{list:ia,playlists:r,tableData:N,activeName:b,commList:x,loading:V}=S(l);T(()=>{U()}),F(()=>f.query.id,()=>{f.query.id&&U()});const U=()=>{l.loading=!0,M(async()=>{const{data:m}=await P(f.query.id);l.playlists=m.playlist,l.tableData=m.playlist.tracks.map(s=>{const p=s.ar.map(t=>t.name).join(",");return{cover:s.al.picUrl,title:s.name,singer:p,album:s.al.name,time:s.dt,id:s.id,mv:s.mv}}),l.loading=!1;const u=await z({id:f.query.id,limit:20,offset:0});l.commList=u.data})},B=async()=>{const m=l.tableData.map(t=>t.id).join(","),u=await K({id:m}),s=l.tableData.map((t,D)=>{const y=u.data.data.find(k=>k.id==t.id);return{title:t.title,singer:t.singer,cover:t.cover,src:y.url,time:t.time,album:t.album,id:t.id,mv:t.mv}});h.songs.push(...s);const p=h.songs.findIndex(t=>t.id==l.tableData[0].id);h.currentIndex=p};return(m,u)=>{const s=d("el-image"),p=d("el-avatar"),t=d("el-button"),D=d("el-tag"),y=d("el-tab-pane"),k=d("el-tabs"),q=d("el-skeleton");return _(),v("div",null,[a("div",null,[a("div",Q,[c(q,{rows:5,animated:"",loading:e(V)},{default:i(()=>[a("div",$,[a("div",G,[c(s,{src:e(r).coverImgUrl+"?param=250y250"},null,8,["src"])]),a("div",H,[a("h2",W,o(e(r).name),1),a("div",X,[c(p,{size:30,src:e(r).creator.avatarUrl+"?param=60y60"},null,8,["src"]),a("a",Y,o(e(r).creator.nickname),1)]),a("div",Z,[c(t,{type:"primary",round:"",onClick:B},{default:i(()=>[g("播放全部")]),_:1})]),a("div",aa,[(_(!0),v(w,null,I(e(r).tags,(n,L)=>(_(),A(D,{class:"tags-item",key:L},{default:i(()=>[g(o(n),1)]),_:2},1024))),128))]),a("p",null,o(e(r).description),1)])]),c(k,{modelValue:e(b),"onUpdate:modelValue":u[0]||(u[0]=n=>E(b)?b.value=n:null)},{default:i(()=>[c(y,{name:"first"},{label:i(()=>[a("span",null,[ta,g(" 歌单("+o(e(r).trackIds.length)+")",1)])]),default:i(()=>[c(O,{data:e(N)},null,8,["data"])]),_:1}),c(y,{name:"second"},{label:i(()=>[a("span",null,[sa,g(" 评论("+o(e(x).total)+")",1)])]),default:i(()=>[a("div",ea,[a("div",na,[(_(!0),v(w,null,I(e(x).comments,(n,L)=>(_(),v("div",{class:"app-card usercom",key:L},[a("span",null,[c(s,{class:"useravatar",src:n.user.avatarUrl+"?param=32y32",alt:""},null,8,["src"]),g(" "+o(n.user.nickname),1)]),a("div",oa,o(n.content),1),n.ipLocation.location?(_(),v("div",la,[a("span",null,"IP:"+o(n.ipLocation.location),1),a("span",null,o(n.timeStr),1)])):J("",!0)]))),128))])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["loading"])])])])}}};export{_a as default};
