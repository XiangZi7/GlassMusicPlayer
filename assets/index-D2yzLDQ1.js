import{d as C,V as D,x as T,r as L,_ as M,b as g,e as d,l as B,w as x,g as t,f as _,F as V,k as S,h as c,m as n,y as N,W as j,a as I,t as A,o as U,X as q,Y as k,s as $}from"./index-CdQ8spGY.js";import{u as E}from"./useIntersectionObserver-6PZpqx4G.js";import{_ as F}from"./index-CQGrfs3Q.js";const K=C({__name:"index",props:D({direction:{type:String,default:"rtl"},data:{type:Array,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:D(["DIntersect"],["update:modelValue"]),setup(m,{expose:l,emit:i}){l();const e=T(m,"modelValue"),r=i,h=L([]);E(h,{initialPageNum:2,pageSize:10,threshold:.1},u);function u(o){r("DIntersect",o)}const p={drawer:e,Emit:r,observedElement:h,handleIntersect:u};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),z={class:"space-y-8"},O=t("div",null,[t("h2",{class:"text-3xl font-bold"},"Comments"),t("p",{class:"text-muted-foreground"}," Share your thoughts and feedback on this article. ")],-1),R={class:"space-y-6"},W={class:"relative flex shrink-0 overflow-hidden rounded-full h-10 w-10 border"},H={class:"grid gap-2"},J={class:"flex items-center gap-2"},X={class:"font-medium text-base"},Y={class:"text-xs text-muted-foreground"},G={class:"text-xs text-muted-foreground"},Q={class:"text-sm"};function Z(m,l,i,e,r,h){const u=g("el-avatar"),p=g("el-drawer");return d(),B(p,{modelValue:e.drawer,"onUpdate:modelValue":l[0]||(l[0]=o=>e.drawer=o),title:"评论",direction:i.direction,class:"!w-[50%]"},{default:x(()=>[t("div",z,[O,t("div",R,[(d(!0),_(V,null,S(i.data,o=>(d(),_("div",{class:"flex items-start gap-4",key:o.commentId,ref_for:!0,ref:"observedElement"},[t("span",W,[c(u,{src:o.user.avatarUrl+"?param=60y60",alt:o.user.nickname},null,8,["src","alt"])]),t("div",H,[t("div",J,[t("div",X,n(o.user.nickname),1),t("div",Y,n(o.timeStr),1),t("div",G," IP: "+n(o.ipLocation.location),1)]),t("p",Q,n(o.content),1)])]))),128))])])]),_:1},8,["modelValue","direction"])}const tt=M(K,[["render",Z],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/components/CommentPopup/index.vue"]]),et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},st=t("path",{fill:"currentColor",d:"M8 11a1 1 0 1 0 1 1a1 1 0 0 0-1-1m4 0a1 1 0 1 0 1 1a1 1 0 0 0-1-1m4 0a1 1 0 1 0 1 1a1 1 0 0 0-1-1m-4-9A10 10 0 0 0 2 12a9.89 9.89 0 0 0 2.26 6.33l-2 2a1 1 0 0 0-.21 1.09A1 1 0 0 0 3 22h9a10 10 0 0 0 0-20m0 18H5.41l.93-.93a1 1 0 0 0 .3-.71a1 1 0 0 0-.3-.7A8 8 0 1 1 12 20"},null,-1),at=[st];function ot(m,l){return d(),_("svg",et,[...at])}const lt={name:"uil-comment-dots",render:ot},nt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},rt=t("path",{fill:"currentColor",d:"m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"},null,-1),it=[rt];function ct(m,l){return d(),_("svg",nt,[...it])}const dt={name:"mdi-cards-heart-outline",render:ct},_t={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mt=t("path",{fill:"currentColor",d:"m9.5 16.5l7-4.5l-7-4.5zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1),ut=[mt];function pt(m,l){return d(),_("svg",_t,[...ut])}const ht={name:"material-symbols-play-circle-outline",render:pt},ft={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},xt=t("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m-2.5-3.5l7-4.5l-7-4.5z"},null,-1),yt=[xt];function gt(m,l){return d(),_("svg",ft,[...yt])}const vt={name:"ic-outline-play-circle",render:gt},wt=C({__name:"index",setup(m,{expose:l}){l();const i=N(),e=j(),r=I({playlistData:{playlist:{tracks:[]}},commentListData:[],drawer:!1}),{playlistData:h,commentListData:u,drawer:p}=A(r);U(()=>{q(i.query.id).then(a=>{r.playlistData=a})});function o(a){if(a<1e4)return a.toString();if(a<1e5){const s=(a/1e4).toFixed(1);return s.endsWith(".0")?s.slice(0,-2)+"万":s+"万"}else return(a/1e4).toFixed(0)+"万"}function y(a){return new Date(a).toLocaleString()}const f={route:i,audioStore:e,state:r,playlistData:h,commentListData:u,drawer:p,formatNumber:o,formattedDate:y,getCommentPlaylist:(a=1)=>{k({offset:a,id:i.query.id}).then(s=>{r.commentListData=r.commentListData.concat(s.comments)})},showDrawer:()=>{r.drawer=!0,!(r.commentListData.length>0)&&k({offset:1,id:i.query.id}).then(a=>{r.commentListData=a.comments})},playMusic:()=>{let a=h.value.playlist.tracks.map(s=>({id:s.id,title:s.name,singer:s.ar.map(P=>P.name).join(" / "),album:s.al.name,cover:s.al.picUrl,time:s.dt,source:"",mv:s.mv}));e.addTrack(a)}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),bt={class:"container h-full px-4 md:px-6 py-12 w-full box-border flex flex-1 flex-col overflow-x-hidden"},Dt={class:"flex flex-col md:flex-row h-full gap-8 md:gap-12 lg:gap-16"},kt={class:"lg:flex flex-col items-center gap-4 relative hidden w-[320px]"},Ct=["src"],Mt={class:"absolute top-2 right-2 bg-gray-400/50 dark:bg-gray-600/50 px-2 py-1 rounded-md text-white text-sm flex items-center gap-1"},Vt={class:"text-center flex flex-col gap-3"},St={class:"text-2xl font-bold tracking-tight dark:text-white"},Pt={class:"flex items-center justify-center gap-2 text-muted-foreground dark:text-gray-300 text-sm md:text-base"},Tt=["src"],Lt={class:"flex items-center justify-center gap-2 text-muted-foreground dark:text-gray-300 text-sm md:text-base"},Bt={class:"bg-muted dark:bg-gray-700 px-2 py-1 rounded-md text-sm"},Nt=["title"],jt={class:"flex items-center justify-center gap-1 w-full"},It={class:"flex items-center"},At={class:"text-sm dark:text-gray-300"},Ut={class:"flex items-center"},qt={class:"text-sm dark:text-gray-300"},$t={class:"flex items-center"},Et={class:"text-sm dark:text-gray-300"},Ft={class:"text-muted-foreground dark:text-gray-300 text-sm"},Kt={class:"text-muted-foreground dark:text-gray-300 text-sm"},zt={class:"gap-6 flex flex-1"},Ot={class:"relative w-full h-full overflow-hidden"};function Rt(m,l,i,e,r,h){var f,a;const u=vt,p=ht,o=g("el-button"),y=dt,v=lt,w=F,b=tt;return d(),_("div",bt,[t("div",Dt,[t("div",kt,[t("img",{src:e.playlistData.playlist.coverImgUrl+"?param=560y560",alt:"Summer Vibes Playlist",width:"300",height:"300",class:"rounded-lg object-cover aspect-square"},null,8,Ct),t("div",Mt,[c(u),$(" "+n(e.formatNumber(e.playlistData.playlist.playCount)),1)]),t("div",Vt,[t("h1",St,n(e.playlistData.playlist.name),1),t("div",Pt,[t("img",{src:(f=e.playlistData.playlist.creator)==null?void 0:f.avatarUrl,alt:"DJ Sunny",width:"24",height:"24",class:"rounded-full",style:{"aspect-ratio":"24 / 24","object-fit":"cover"}},null,8,Tt),t("span",null,n((a=e.playlistData.playlist.creator)==null?void 0:a.nickname),1)]),t("div",Lt,[(d(!0),_(V,null,S(e.playlistData.playlist.tags,s=>(d(),_("span",Bt,n(s),1))),256))]),t("p",{class:"text-muted-foreground dark:text-gray-300 text-sm md:line-clamp-5",title:e.playlistData.playlist.description},n(e.playlistData.playlist.description),9,Nt),t("div",jt,[t("div",It,[c(o,{text:"",circle:"",class:"!p-3",onClick:e.playMusic},{default:x(()=>[c(p,{class:"text-xl dark:text-white"})]),_:1}),t("span",At,n(e.formatNumber(e.playlistData.playlist.playCount)),1)]),t("div",Ut,[c(o,{text:"",circle:"",class:"!p-3"},{default:x(()=>[c(y,{class:"text-xl dark:text-white"})]),_:1}),t("span",qt,n(e.formatNumber(e.playlistData.playlist.subscribedCount)),1)]),t("div",$t,[c(o,{text:"",circle:"",class:"!p-3",onClick:e.showDrawer},{default:x(()=>[c(v,{class:"text-xl dark:text-white"})]),_:1}),t("span",Et,n(e.formatNumber(e.playlistData.playlist.commentCount)),1)])]),t("p",Ft,n(e.formattedDate(e.playlistData.playlist.createTime)),1),t("span",Kt,n(e.playlistData.playlist.trackCount)+" songs ",1)])]),t("div",zt,[t("div",Ot,[c(w,{modelValue:e.playlistData.playlist.tracks,"onUpdate:modelValue":l[0]||(l[0]=s=>e.playlistData.playlist.tracks=s)},null,8,["modelValue"])])])]),c(b,{modelValue:e.drawer,"onUpdate:modelValue":l[1]||(l[1]=s=>e.drawer=s),data:e.commentListData,onDIntersect:e.getCommentPlaylist},null,8,["modelValue","data"])])}const Xt=M(wt,[["render",Rt],["__file","/home/runner/work/KM-Music-Player/KM-Music-Player/src/views/songlist/index.vue"]]);export{Xt as default};
